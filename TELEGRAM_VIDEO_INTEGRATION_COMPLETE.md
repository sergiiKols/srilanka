# ‚úÖ –ò–ù–¢–ï–ì–†–ê–¶–ò–Ø –í–ò–î–ï–û –ó–ê–í–ï–†–®–ï–ù–ê

## üéØ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –≤—ã–±—Ä–∞–Ω–æ**
–ü–æ—Å–ª–µ –∞–Ω–∞–ª–∏–∑–∞ `terabox-upload-tool`:
- ‚ùå TeraBox —Ç—Ä–µ–±—É–µ—Ç —Ä—É—á–Ω—ã–µ credentials
- ‚ùå –ù–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è production
- ‚úÖ **–í—ã–±—Ä–∞–Ω–æ: Telegram File Storage**

### 2. **–ü–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å–æ–∑–¥–∞–Ω–∞**
```
User ‚Üí Telegram Bot ‚Üí file_id ‚Üí Supabase DB
User –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –æ–±—ä–µ–∫—Ç ‚Üí VideoPlayer ‚Üí Telegram API ‚Üí –í–∏–¥–µ–æ
```

### 3. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ PropertyDrawer**
‚úÖ –í–∏–¥–µ–æ **–≤—Å—Ç—Ä–æ–µ–Ω–æ –≤ —Å–ª–∞–π–¥–µ—Ä —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π**:
- –í–∏–¥–µ–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è **–ø–µ—Ä–≤—ã–º** —Å–ª–∞–π–¥–æ–º (–µ—Å–ª–∏ –µ—Å—Ç—å)
- –§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –∏–¥—É—Ç –ø–æ—Å–ª–µ –≤–∏–¥–µ–æ
- –°—á—ë—Ç—á–∏–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç: "1 / 5" (1 –≤–∏–¥–µ–æ + 4 —Ñ–æ—Ç–æ)
- –°—Ç—Ä–µ–ª–∫–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –¥–ª—è –≤–∏–¥–µ–æ –∏ —Ñ–æ—Ç–æ
- –ú–µ—Ç–∫–∞ "üé¨ –í–ò–î–ï–û" –Ω–∞ –ø—Ä–µ–≤—å—é

## üìä –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –û—Ç–ø—Ä–∞–≤–∫–∞ –≤–∏–¥–µ–æ:
```
1. User –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤–∏–¥–µ–æ –±–æ—Ç—É
2. Bot: "üé¨ –í–∏–¥–µ–æ –ø–æ–ª—É—á–µ–Ω–æ! ‚è±Ô∏è 3:45, üì¶ 45MB"
3. User –¥–æ–±–∞–≤–ª—è–µ—Ç –æ–ø–∏—Å–∞–Ω–∏–µ + –ª–æ–∫–∞—Ü–∏—é
4. User: "‚úÖ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å"
5. Bot —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç file_id –≤ –ë–î (–ù–ï —Å–∫–∞—á–∏–≤–∞–µ—Ç!)
6. Bot: "‚úÖ –í–∏–¥–µ–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ –Ω–∞ Telegram –±–µ—Å–ø–ª–∞—Ç–Ω–æ!"
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –Ω–∞ —Å–∞–π—Ç–µ:
```
1. User –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –æ–±—ä–µ–∫—Ç –Ω–∞ –∫–∞—Ä—Ç–µ
2. PropertyDrawer –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è
3. –°–ª–∞–π–¥–µ—Ä –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:
   - –°–ª–∞–π–¥ 1: üé¨ –í–ò–î–ï–û (VideoPlayer —Å –∫–Ω–æ–ø–∫–æ–π Play)
   - –°–ª–∞–π–¥ 2: –§–æ—Ç–æ 1
   - –°–ª–∞–π–¥ 3: –§–æ—Ç–æ 2
   ...
4. User –Ω–∞–∂–∏–º–∞–µ—Ç Play ‚Üí –≤–∏–¥–µ–æ –≥—Ä—É–∑–∏—Ç—Å—è –∏–∑ Telegram
5. –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ URL –∫–∞–∂–¥—ã–µ 50 –º–∏–Ω—É—Ç
```

## üìÅ –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### –°–æ–∑–¥–∞–Ω–æ:
1. ‚úÖ `src/lib/telegram-video-uploader.ts`
2. ‚úÖ `src/pages/api/video-url.ts`
3. ‚úÖ `src/components/VideoPlayer.tsx`
4. ‚úÖ `database/12_add_video_support.sql`
5. ‚úÖ `TELEGRAM_VIDEO_STORAGE_GUIDE.md`

### –û–±–Ω–æ–≤–ª–µ–Ω–æ:
1. ‚úÖ `src/pages/api/telegram-webhook.ts` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤–∏–¥–µ–æ
2. ‚úÖ `src/lib/tenant-bot-db.ts` - –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã —Å video_url
3. ‚úÖ `src/components/property/PropertyDrawer.tsx` - **—Å–ª–∞–π–¥–µ—Ä —Å –≤–∏–¥–µ–æ**

## üöÄ –ó–∞–ø—É—Å–∫

### 1. SQL –º–∏–≥—Ä–∞—Ü–∏—è
```sql
-- –í Supabase SQL Editor
database/12_add_video_support.sql
```

### 2. –¢–µ—Å—Ç
```
1. npm run dev
2. –û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤–∏–¥–µ–æ –±–æ—Ç—É
3. –î–æ–±–∞–≤–∏—Ç—å –æ–ø–∏—Å–∞–Ω–∏–µ + –≥–µ–æ–ª–æ–∫–∞—Ü–∏—é
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
5. –û—Ç–∫—Ä—ã—Ç—å –æ–±—ä–µ–∫—Ç –Ω–∞ –∫–∞—Ä—Ç–µ
6. –£–≤–∏–¥–µ—Ç—å –≤–∏–¥–µ–æ –≤ —Å–ª–∞–π–¥–µ—Ä–µ!
```

## üí° –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –í PropertyDrawer:
```tsx
{/* üé¨ –í–∏–¥–µ–æ (–µ—Å–ª–∏ –µ—Å—Ç—å) - –ü–ï–†–í–´–ô —Å–ª–∞–π–¥ */}
{property.video_url && (
  <div className="flex-shrink-0 w-full h-full snap-center relative bg-black">
    <VideoPlayer
      fileId={property.video_url}
      thumbnailFileId={property.video_thumbnail_url}
      width={800}
      height={300}
    />
    <div className="absolute top-4 left-4 bg-red-500 text-white px-2 py-1 rounded text-xs font-bold">
      üé¨ –í–ò–î–ï–û
    </div>
  </div>
)}

{/* –§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ - –ø–æ—Å–ª–µ –≤–∏–¥–µ–æ */}
{property.images.map(...)}
```

### –°—á—ë—Ç—á–∏–∫ —Å–ª–∞–π–¥–æ–≤:
```tsx
{(property.video_url ? 1 : 0) + index + 1} / {(property.video_url ? 1 : 0) + property.images.length}
```

### –ù–∞–≤–∏–≥–∞—Ü–∏—è:
```tsx
{((property.video_url ? 1 : 0) + property.images.length) > 1 && (
  <> {/* –°—Ç—Ä–µ–ª–∫–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ */ } </>
)}
```

## üìä –ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã

### –ß—Ç–æ –ù–ï –¥–µ–ª–∞–µ–º:
- ‚ùå –ù–µ —Å–∫–∞—á–∏–≤–∞–µ–º –≤–∏–¥–µ–æ —Å Telegram
- ‚ùå –ù–µ —Ö—Ä–∞–Ω–∏–º –≤–∏–¥–µ–æ –Ω–∞ –Ω–∞—à–µ–º —Å–µ—Ä–≤–µ—Ä–µ
- ‚ùå –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º Supabase Storage –¥–ª—è –≤–∏–¥–µ–æ
- ‚ùå –ù–µ –ø–ª–∞—Ç–∏–º –∑–∞ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ

### –ß—Ç–æ –¥–µ–ª–∞–µ–º:
- ‚úÖ –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–æ–ª—å–∫–æ file_id (50 –±–∞–π—Ç –≤ –ë–î)
- ‚úÖ –ü–æ–ª—É—á–∞–µ–º –≤—Ä–µ–º–µ–Ω–Ω—ã–π URL –ø—Ä–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ–º –±–µ—Å–ø–ª–∞—Ç–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ Telegram
- ‚úÖ –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ URL –∫–∞–∂–¥—ã–µ 50 –º–∏–Ω—É—Ç

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

### –î–û:
```
–°–ª–∞–π–¥–µ—Ä:
1. –§–æ—Ç–æ 1
2. –§–æ—Ç–æ 2
3. –§–æ—Ç–æ 3
```

### –ü–û–°–õ–ï:
```
–°–ª–∞–π–¥–µ—Ä:
1. üé¨ –í–ò–î–ï–û (—Å –∫–Ω–æ–ø–∫–æ–π Play)
2. –§–æ—Ç–æ 1
3. –§–æ—Ç–æ 2
4. –§–æ—Ç–æ 3

–°—á—ë—Ç—á–∏–∫: "1 / 4"
```

## ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ä–µ—à–µ–Ω–∏—è

1. **–ë–µ—Å–ø–ª–∞—Ç–Ω–æ** - 0‚ÇΩ –∑–∞ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤–∏–¥–µ–æ
2. **–ü—Ä–æ—Å—Ç–æ** - –≤–∏–¥–µ–æ –≤ —Ç–æ–º –∂–µ —Å–ª–∞–π–¥–µ—Ä–µ —á—Ç–æ –∏ —Ñ–æ—Ç–æ
3. **–ù–∞–¥—ë–∂–Ω–æ** - —Å–µ—Ä–≤–µ—Ä—ã Telegram, 99.9% uptime
4. **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ** - –±–µ–∑ –ª–∏–º–∏—Ç–æ–≤ –Ω–∞ –æ–±—ä—ë–º
5. **–ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π UI** - –≤–∏–¥–µ–æ –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–≤—ã–π —Å–ª–∞–π–¥

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç:** `VIDEO_TELEGRAM_STORAGE_QUICK_START.md`
- **–ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ:** `TELEGRAM_VIDEO_STORAGE_GUIDE.md`
- **–≠—Ç–∞ —Å–≤–æ–¥–∫–∞:** `TELEGRAM_VIDEO_INTEGRATION_COMPLETE.md`

## üéâ –ì–û–¢–û–í–û!

–°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–∞. –ó–∞–ø—É—Å—Ç–∏—Ç–µ SQL –º–∏–≥—Ä–∞—Ü–∏—é –∏ —Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ! üöÄ

---

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤–∏–¥–µ–æ –±–æ—Ç—É –∏ —É–≤–∏–¥–µ—Ç—å –µ–≥–æ –Ω–∞ –∫–∞—Ä—Ç–µ –≤ PropertyDrawer!
