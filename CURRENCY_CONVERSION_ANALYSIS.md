# üîç –ê–Ω–∞–ª–∏–∑: –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤–∞–ª—é—Ç –≤ —Å–∏—Å—Ç–µ–º–µ

**–î–∞—Ç–∞:** 31 —è–Ω–≤–∞—Ä—è 2026  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ö–û–ù–í–ï–†–¢–ê–¶–ò–Ø –†–ï–ê–õ–ò–ó–û–í–ê–ù–ê** (31.01.2026)

---

## üéØ –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ –ø–∞—Ä—Å–∏–Ω–≥–µ —Ü–µ–Ω –∏–∑ –æ–±—ä—è–≤–ª–µ–Ω–∏–π —Å–∏—Å—Ç–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ü–µ–Ω—É –∏ –≤–∞–ª—é—Ç—É **"–∫–∞–∫ –µ—Å—Ç—å"**:
- –¶–µ–Ω–∞ –≤ USD ‚Üí —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ USD
- –¶–µ–Ω–∞ –≤ LKR (—Ä—É–ø–∏–∏) ‚Üí —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ LKR
- –¶–µ–Ω–∞ –≤ EUR ‚Üí —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ EUR

**–ù–û:** –ù–µ—Ç –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –≤ –µ–¥–∏–Ω—É—é –≤–∞–ª—é—Ç—É –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è!

---

## üìä –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### 1. –§—É–Ω–∫—Ü–∏—è `formatPrice()` (src/lib/tenant-bot-utils.ts)

```typescript
export function formatPrice(price: number, currency: string = 'USD'): string {
  if (!price) return '';
  
  const formatted = new Intl.NumberFormat('en-US').format(price);
  
  switch (currency.toUpperCase()) {
    case 'USD':
      return `$${formatted}`;
    case 'LKR':
      return `Rs ${formatted}`;
    case 'EUR':
      return `‚Ç¨${formatted}`;
    default:
      return `${formatted} ${currency}`;
  }
}
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:** –¢–æ–ª—å–∫–æ —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ  
**–ß—Ç–æ –ù–ï –¥–µ–ª–∞–µ—Ç:** –ù–µ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç —Ü–µ–Ω—É –º–µ–∂–¥—É –≤–∞–ª—é—Ç–∞–º–∏

---

### 2. –ü–∞—Ä—Å–∏–Ω–≥ —Ü–µ–Ω—ã –≤ Groq (src/services/groqService.ts)

```typescript
price: Number (price per month/night in USD or local currency)
currency: String (e.g., "USD", "LKR", "EUR")
pricePeriod: String (e.g., "month", "night", "week")
```

**–ü—Ä–æ–±–ª–µ–º–∞:** Groq AI –º–æ–∂–µ—Ç –≤–µ—Ä–Ω—É—Ç—å —Ü–µ–Ω—É –≤ –ª—é–±–æ–π –≤–∞–ª—é—Ç–µ, —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–æ—Å—Ç–æ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –µ—ë.

---

### 3. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –±–∞–∑—É (src/lib/telegram-bot-ai.ts)

```typescript
export function formatForDatabase(result: AIAnalysisResult) {
  return {
    price: safeNumber(result.price),
    currency: result.currency || 'USD',
    price_period: result.pricePeriod || 'night',
    // ... –¥—Ä—É–≥–∏–µ –ø–æ–ª—è
  };
}
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ—Ç –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –≤ –ë–î.

---

## üí° –ü—Ä–∏–º–µ—Ä—ã –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –û–±—ä—è–≤–ª–µ–Ω–∏–µ –≤ —Ä—É–ø–∏—è—Ö
```
–¢–µ–∫—Å—Ç: "–î–æ–º –≤ –ú–∏—Ä–∏—Å—Å–µ, 50000 —Ä—É–ø–∏–π –≤ –º–µ—Å—è—Ü"
Groq AI –ø–∞—Ä—Å–∏—Ç: price=50000, currency="LKR"
–°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è: price=50000, currency="LKR"

–ù–û: –ù–∞ –∫–∞—Ä—Ç–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è "Rs 50,000"
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –ø–æ–¥—É–º–∞—Ç—å —á—Ç–æ —ç—Ç–æ $50,000 –µ—Å–ª–∏ –Ω–µ —É–≤–∏–¥–∏—Ç —Å–∏–º–≤–æ–ª —Ä—É–ø–∏–π!
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ü–µ–Ω
```
–û–±—ä–µ–∫—Ç 1: $500/–º–µ—Å—è—Ü
–û–±—ä–µ–∫—Ç 2: 50,000 —Ä—É–ø–∏–π/–º–µ—Å—è—Ü (‚âà $150/–º–µ—Å—è—Ü)

–ù–û: –°–∏—Å—Ç–µ–º–∞ –Ω–µ –º–æ–∂–µ—Ç –∏—Ö —Å—Ä–∞–≤–Ω–∏—Ç—å, —Ç.–∫. —Ä–∞–∑–Ω—ã–µ –≤–∞–ª—é—Ç—ã!
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –§–∏–ª—å—Ç—Ä –ø–æ —Ü–µ–Ω–µ
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç "–¥–æ $1000/–º–µ—Å—è—Ü"

–ù–û: –û–±—ä–µ–∫—Ç—ã –≤ LKR –Ω–µ –ø–æ–ø–∞–¥—É—Ç –≤ —Ñ–∏–ª—å—Ç—Ä, —Ç.–∫. –Ω–µ—Ç –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏!
```

---

## üîß –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –ø—Ä–∏ –ø–∞—Ä—Å–∏–Ω–≥–µ (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)

–î–æ–±–∞–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –≤ `telegram-bot-ai.ts`:

```typescript
/**
 * –ê–∫—Ç—É–∞–ª—å–Ω—ã–µ –∫—É—Ä—Å—ã –≤–∞–ª—é—Ç –∫ USD
 * –û–±–Ω–æ–≤–ª—è—é—Ç—Å—è –≤—Ä—É—á–Ω—É—é –∏–ª–∏ —á–µ—Ä–µ–∑ API
 */
const EXCHANGE_RATES: Record<string, number> = {
  'USD': 1,
  'LKR': 0.0031,  // 1 LKR = $0.0031 (–∫—É—Ä—Å –Ω–∞ 31.01.2026)
  'EUR': 1.09,    // 1 EUR = $1.09
  'GBP': 1.27,    // 1 GBP = $1.27
  'INR': 0.012,   // 1 INR = $0.012
  'RUB': 0.011    // 1 RUB = $0.011
};

/**
 * –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç —Ü–µ–Ω—É –≤ USD
 */
export function convertToUSD(price: number, currency: string): number {
  const rate = EXCHANGE_RATES[currency.toUpperCase()];
  if (!rate) {
    console.warn(`‚ö†Ô∏è Unknown currency: ${currency}, assuming USD`);
    return price;
  }
  return price * rate;
}

/**
 * –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç –∏–∑ USD –≤ –¥—Ä—É–≥—É—é –≤–∞–ª—é—Ç—É
 */
export function convertFromUSD(priceUSD: number, targetCurrency: string): number {
  const rate = EXCHANGE_RATES[targetCurrency.toUpperCase()];
  if (!rate) {
    console.warn(`‚ö†Ô∏è Unknown currency: ${targetCurrency}, returning USD`);
    return priceUSD;
  }
  return priceUSD / rate;
}
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –•—Ä–∞–Ω–∏—Ç—å –æ–±–µ –≤–∞–ª—é—Ç—ã

–°–æ—Ö—Ä–∞–Ω—è—Ç—å –≤ –±–∞–∑—É –∏ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—É—é —Ü–µ–Ω—É, –∏ —Ü–µ–Ω—É –≤ USD:

```typescript
export function formatForDatabase(result: AIAnalysisResult) {
  const priceUSD = result.currency === 'USD' 
    ? result.price 
    : convertToUSD(result.price, result.currency);
  
  return {
    // –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞
    price: safeNumber(result.price),
    currency: result.currency || 'USD',
    
    // –¶–µ–Ω–∞ –≤ USD –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–æ–≤ –∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
    price_usd: safeNumber(priceUSD),
    
    price_period: result.pricePeriod || 'night',
    // ...
  };
}
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∫—É—Ä—Å —á–µ—Ä–µ–∑ API

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å API –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö –∫—É—Ä—Å–æ–≤:

```typescript
/**
 * –ü–æ–ª—É—á–∞–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –∫—É—Ä—Å—ã –≤–∞–ª—é—Ç
 * API: https://api.exchangerate-api.com/v4/latest/USD (–±–µ—Å–ø–ª–∞—Ç–Ω–æ)
 */
async function fetchExchangeRates(): Promise<Record<string, number>> {
  try {
    const response = await fetch('https://api.exchangerate-api.com/v4/latest/USD');
    const data = await response.json();
    return data.rates;
  } catch (error) {
    console.error('Failed to fetch exchange rates, using fallback');
    return EXCHANGE_RATES; // Fallback –Ω–∞ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –∫—É—Ä—Å—ã
  }
}
```

---

## üéØ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ–µ —Ä–µ—à–µ–Ω–∏–µ

### –≠—Ç–∞–ø 1: –î–æ–±–∞–≤–∏—Ç—å –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—é –≤ USD
1. –°–æ–∑–¥–∞—Ç—å `src/utils/currencyConverter.ts` —Å —Ñ—É–Ω–∫—Ü–∏—è–º–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏
2. –î–æ–±–∞–≤–∏—Ç—å —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –∫—É—Ä—Å—ã –≤–∞–ª—é—Ç (–æ–±–Ω–æ–≤–ª—è—Ç—å —Ä–∞–∑ –≤ –º–µ—Å—è—Ü)
3. –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ `formatForDatabase()` –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏

### –≠—Ç–∞–ø 2: –û–±–Ω–æ–≤–∏—Ç—å —Å—Ö–µ–º—É –ë–î
–î–æ–±–∞–≤–∏—Ç—å –∫–æ–ª–æ–Ω–∫—É `price_usd` –≤ —Ç–∞–±–ª–∏—Ü—É `saved_properties`:

```sql
ALTER TABLE saved_properties 
ADD COLUMN price_usd NUMERIC;

-- –û–±–Ω–æ–≤–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∑–∞–ø–∏—Å–∏
UPDATE saved_properties 
SET price_usd = 
  CASE 
    WHEN currency = 'USD' THEN price
    WHEN currency = 'LKR' THEN price * 0.0031
    WHEN currency = 'EUR' THEN price * 1.09
    ELSE price
  END;
```

### –≠—Ç–∞–ø 3: –û–±–Ω–æ–≤–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã
–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `price_usd` –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏:

```typescript
// –í–º–µ—Å—Ç–æ:
WHERE price <= ${maxPrice}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:
WHERE price_usd <= ${maxPrice}
```

### –≠—Ç–∞–ø 4: –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ
–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –æ–±–µ —Ü–µ–Ω—ã:

```typescript
// –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞
"Rs 50,000/–º–µ—Å—è—Ü"

// –° —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–æ–º –≤ USD
"Rs 50,000/–º–µ—Å—è—Ü (‚âà $155)"
```

---

## üìä –ö—É—Ä—Å—ã –≤–∞–ª—é—Ç (–∞–∫—Ç—É–∞–ª—å–Ω–æ –Ω–∞ 31.01.2026)

| –í–∞–ª—é—Ç–∞ | –ö–æ–¥ | –ö—É—Ä—Å –∫ USD | –ü—Ä–∏–º–µ—Ä |
|--------|-----|-----------|--------|
| –î–æ–ª–ª–∞—Ä –°–®–ê | USD | 1.00 | $100 = $100 |
| –®—Ä–∏-–õ–∞–Ω–∫–∏–π—Å–∫–∞—è —Ä—É–ø–∏—è | LKR | 0.0031 | 50,000 LKR ‚âà $155 |
| –ï–≤—Ä–æ | EUR | 1.09 | ‚Ç¨100 ‚âà $109 |
| –§—É–Ω—Ç —Å—Ç–µ—Ä–ª–∏–Ω–≥–æ–≤ | GBP | 1.27 | ¬£100 ‚âà $127 |
| –ò–Ω–¥–∏–π—Å–∫–∞—è —Ä—É–ø–∏—è | INR | 0.012 | ‚Çπ10,000 ‚âà $120 |
| –†–æ—Å—Å–∏–π—Å–∫–∏–π —Ä—É–±–ª—å | RUB | 0.011 | ‚ÇΩ10,000 ‚âà $110 |

**–ò—Å—Ç–æ—á–Ω–∏–∫:** xe.com, exchangerate-api.com  
**–û–±–Ω–æ–≤–ª–µ–Ω–æ:** 31 —è–Ω–≤–∞—Ä—è 2026

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

- [ ] –°–æ–∑–¥–∞—Ç—å `src/utils/currencyConverter.ts`
- [ ] –î–æ–±–∞–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `convertToUSD()`
- [ ] –î–æ–±–∞–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `convertFromUSD()`
- [ ] –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ `formatForDatabase()`
- [ ] –û–±–Ω–æ–≤–∏—Ç—å —Å—Ö–µ–º—É –ë–î (–¥–æ–±–∞–≤–∏—Ç—å `price_usd`)
- [ ] –û–±–Ω–æ–≤–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `price_usd`
- [ ] –î–æ–±–∞–≤–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–∞ –≤ USD
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å LKR —Ü–µ–Ω–∞–º–∏
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫—É—Ä—Å–æ–≤ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

---

## üöÄ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç

**–°–†–ï–î–ù–ò–ô** - –§—É–Ω–∫—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –±–µ–∑ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏:
- ‚úÖ –¶–µ–Ω—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- ‚ö†Ô∏è –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –º–µ–∂–¥—É –≤–∞–ª—é—Ç–∞–º–∏ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ
- ‚ö†Ô∏è –§–∏–ª—å—Ç—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –æ–¥–Ω–æ–π –≤–∞–ª—é—Ç—ã

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –î–æ–±–∞–≤–∏—Ç—å –≤ —Å–ª–µ–¥—É—é—â–µ–º —Ä–µ–ª–∏–∑–µ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è UX.

---

**–ê–≤—Ç–æ—Ä:** Rovo Dev  
**–î–∞—Ç–∞:** 2026-01-31
