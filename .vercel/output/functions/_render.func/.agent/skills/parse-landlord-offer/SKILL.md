## Name: Parse Landlord Offer

## Description:
–ü–∞—Ä—Å–∏–Ω–≥ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –æ—Ç –∞—Ä–µ–Ω–¥–æ–¥–∞—Ç–µ–ª—è (landlord) —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –æ–±—ä–µ–∫—Ç–∞ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏ –∏ –ø—Ä–∏–≤—è–∑–∫–æ–π –∫ –∑–∞—è–≤–∫–µ –∫–ª–∏–µ–Ω—Ç–∞

## Purpose:
–ö–æ–≥–¥–∞ –∞—Ä–µ–Ω–¥–æ–¥–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ—Ç–≤–µ—Ç (–ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ) —á–µ—Ä–µ–∑ —Ñ–æ—Ä–º—É –≤ Telegram-–±–æ—Ç–µ, —Å–∏—Å—Ç–µ–º–∞ –¥–æ–ª–∂–Ω–∞ —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å –µ–≥–æ, –∏–∑–≤–ª–µ—á—å –¥–∞–Ω–Ω—ã–µ –∏ —Å–æ–∑–¥–∞—Ç—å –≤ –ë–î –æ–±—ä–µ–∫—Ç –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏ (property) –∏ –ø—Ä–∏–≤—è–∑–∞—Ç—å –µ–≥–æ –∫ –∑–∞—è–≤–∫–µ –∫–ª–∏–µ–Ω—Ç–∞ (rental_offer).

---

## üìã –ü–û–õ–ù–û–ï –û–ü–ò–°–ê–ù–ò–ï –ó–ê–î–ê–ß–ò

### –ù–ê–ó–ù–ê–ß–ï–ù–ò–ï
–ö–æ–≥–¥–∞ –∞—Ä–µ–Ω–¥–æ–¥–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ—Ç–≤–µ—Ç (–ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ) —á–µ—Ä–µ–∑ —Ñ–æ—Ä–º—É –≤ –±–æ—Ç–µ, —Å–∏—Å—Ç–µ–º–∞ –¥–æ–ª–∂–Ω–∞ —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å –µ–≥–æ, –∏–∑–≤–ª–µ—á—å –¥–∞–Ω–Ω—ã–µ –∏ —Å–æ–∑–¥–∞—Ç—å –≤ –ë–î:
- **–û–±—ä–µ–∫—Ç –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏** (`property`)
- **–ü—Ä–∏–≤—è–∑–∫—É —ç—Ç–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ –∫ –∑–∞—è–≤–∫–µ** (`rental_offer`)

### –ö–û–ì–î–ê –ó–ê–ü–£–°–ö–ê–ï–¢–°–Ø
- –ö–æ–≥–¥–∞ Telegram-–±–æ—Ç –ø–æ–ª—É—á–∞–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—É—é —Ñ–æ—Ä–º—É –æ—Ç –∞—Ä–µ–Ω–¥–æ–¥–∞—Ç–µ–ª—è
- –§–æ—Ä–º–∞ –ø—Ä–∏—Ö–æ–¥–∏—Ç –∫–∞–∫ **webhook** –∏–ª–∏ **callback** –æ—Ç –±–æ—Ç–∞
- –ú–æ–∂–µ—Ç –±—ã—Ç—å –≤—ã–∑–≤–∞–Ω –≤—Ä—É—á–Ω—É—é –∏–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –ß–¢–û –ù–ê –í–•–û–î–ï

**–î–∞–Ω–Ω—ã–µ –∏–∑ Telegram-—Ñ–æ—Ä–º—ã:**
- **–ù–∞–∑–≤–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞** (`property_name`) - –Ω–∞–ø—Ä–∏–º–µ—Ä: "Villa Sunset"
- **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–ø–∞–ª–µ–Ω** (`bedrooms`) - —á–∏—Å–ª–æ: 1, 2, 3, 4+
- **–£–¥–æ–±—Å—Ç–≤–∞** (`amenities`) - checkboxes:
  - WiFi
  - –ë–∞—Å—Å–µ–π–Ω (pool)
  - –ö—É—Ö–Ω—è (kitchen)
  - –ö–æ–Ω–¥–∏—Ü–∏–æ–Ω–µ—Ä (AC)
  - –ü–∞—Ä–∫–æ–≤–∫–∞ (parking)
  - –°—Ç–∏—Ä–∞–ª—å–Ω–∞—è –º–∞—à–∏–Ω–∞ (washing machine)
  - –ò –¥—Ä—É–≥–∏–µ...
- **–¶–µ–Ω–∞ –∑–∞ –Ω–æ—á—å** (`price_per_night`) - –≤ USD
- **–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏** (`photos`) - –º–∞—Å—Å–∏–≤ —Ñ–∞–π–ª–æ–≤ –∏–∑ Telegram
- **–¢–µ–ª–µ—Ñ–æ–Ω –∞—Ä–µ–Ω–¥–æ–¥–∞—Ç–µ–ª—è** (`phone`) - –º–æ–∂–µ—Ç –±—ã—Ç—å —É–∂–µ –≤ –ø—Ä–æ—Ñ–∏–ª–µ
- **ID –∞—Ä–µ–Ω–¥–æ–¥–∞—Ç–µ–ª—è** (`landlord_telegram_id`)
- **ID –∑–∞—è–≤–∫–∏** (`request_id`) - –Ω–∞ –∫–æ—Ç–æ—Ä—É—é –æ–Ω –æ—Ç–≤–µ—á–∞–µ—Ç

**–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
- –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã (`lat`, `lng`)
- –ê–¥—Ä–µ—Å (`address`)
- –û–ø–∏—Å–∞–Ω–∏–µ (`description`)

### –ß–¢–û –ù–ê –í–´–•–û–î–ï

**–£—Å–ø–µ—à–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```json
{
  "status": "success",
  "property_id": 456,
  "rental_offer_id": 789,
  "message": "–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ",
  "created_at": "2026-01-26T12:00:00Z"
}
```

**–û—à–∏–±–∫–∞ (–Ω–µ–ø–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ):**
```json
{
  "status": "incomplete",
  "missing_fields": ["photos", "price_per_night"],
  "message": "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è",
  "draft_saved": true
}
```

**–û—à–∏–±–∫–∞:**
```json
{
  "status": "error",
  "error": "Failed to download photos",
  "message": "–ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–∞—á–∞—Ç—å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏"
}
```

---

## üîÑ –ß–¢–û –°–ò–°–¢–ï–ú–ê –î–ï–õ–ê–ï–¢

### –®–∞–≥ 1: –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Ñ–æ—Ä–º—ã
```javascript
// Webhook –æ—Ç Telegram –±–æ—Ç–∞
app.post('/webhook/telegram/form-response', async (req, res) => {
  const formData = req.body;
  await parseLandlordOffer(formData);
});
```

### –®–∞–≥ 2: –í–∞–ª–∏–¥–∞—Ü–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π
```javascript
const requiredFields = ['property_name', 'bedrooms', 'price_per_night', 'photos'];
const missingFields = [];

requiredFields.forEach(field => {
  if (!formData[field] || formData[field].length === 0) {
    missingFields.push(field);
  }
});
```

### –®–∞–≥ 3: –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π
```javascript
// –°–∫–∞—á–∞—Ç—å —Ñ–æ—Ç–æ –∏–∑ Telegram
const photos = [];
for (const photoId of formData.photos) {
  const file = await bot.getFile(photoId);
  const url = `https://api.telegram.org/file/bot${BOT_TOKEN}/${file.file_path}`;
  
  // –ó–∞–≥—Ä—É–∑–∏—Ç—å –≤ Supabase Storage
  const { data, error } = await supabase.storage
    .from('properties')
    .upload(`${propertyId}/${photoId}.jpg`, fileBuffer);
  
  photos.push(data.publicUrl);
}
```

### –®–∞–≥ 4: –°–æ–∑–¥–∞–Ω–∏–µ property –≤ –ë–î
```sql
INSERT INTO properties (
  name,
  bedrooms,
  amenities,
  price_per_night,
  photos,
  landlord_id,
  lat,
  lng,
  address,
  description
) VALUES (
  :name,
  :bedrooms,
  :amenities,
  :price_per_night,
  :photos,
  :landlord_id,
  :lat,
  :lng,
  :address,
  :description
)
RETURNING id;
```

### –®–∞–≥ 5: –°–æ–∑–¥–∞–Ω–∏–µ rental_offer
```sql
INSERT INTO rental_offers (
  request_id,
  property_id,
  landlord_id,
  status,
  created_at
) VALUES (
  :request_id,
  :property_id,
  :landlord_id,
  'pending',
  NOW()
)
RETURNING id;
```

### –®–∞–≥ 6: –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∞—Ä–µ–Ω–¥–æ–¥–∞—Ç–µ–ª—è
```javascript
await bot.sendMessage(
  landlordTelegramId,
  '‚úÖ –°–ø–∞—Å–∏–±–æ! –í–∞—à–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ.\n\n' +
  `–û–±—ä–µ–∫—Ç: ${propertyName}\n` +
  `–ó–∞—è–≤–∫–∞: #${requestId}\n\n` +
  '–ö–ª–∏–µ–Ω—Ç —É–≤–∏–¥–∏—Ç –≤–∞—à–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ –∫–∞—Ä—Ç–µ.'
);
```

### –®–∞–≥ 7: –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞
```javascript
await bot.sendMessage(
  clientTelegramId,
  'üè† –ù–æ–≤–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –ø–æ –≤–∞—à–µ–π –∑–∞—è–≤–∫–µ!\n\n' +
  `${propertyName}\n` +
  `üí∞ $${pricePerNight}/–Ω–æ—á—å\n` +
  `üõèÔ∏è ${bedrooms} —Å–ø–∞–ª–µ–Ω\n\n` +
  '[–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –Ω–∞ –∫–∞—Ä—Ç–µ]'
);
```

---

## üîß –í–ê–ñ–ù–´–ï –í–û–ü–†–û–°–´ (–¥–ª—è production)

### 1. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Telegram-—Ñ–æ—Ä–º—ã
**–ö–∞–∫–∏–µ –∏–º–µ–Ω–Ω–æ –ø–æ–ª—è?**
- –ù–∞–∑–≤–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞ ‚úÖ
- –°–ø–∞–ª—å–Ω–∏ ‚úÖ
- –£–¥–æ–±—Å—Ç–≤–∞ (–∫–∞–∫–∏–µ –∏–º–µ–Ω–Ω–æ —á–µ–∫–±–æ–∫—Å—ã?) ‚ùì
- –¶–µ–Ω–∞ –∑–∞ –Ω–æ—á—å ‚úÖ
- –§–æ—Ç–æ (—Å–∫–æ–ª—å–∫–æ –º–∏–Ω–∏–º—É–º/–º–∞–∫—Å–∏–º—É–º?) ‚ùì
- –¢–µ–ª–µ—Ñ–æ–Ω ‚ùì
- –ê–¥—Ä–µ—Å ‚ùì

### 2. –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã
- –ê—Ä–µ–Ω–¥–æ–¥–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç –≤—Ä—É—á–Ω—É—é? ‚ùì
- –°–∏—Å—Ç–µ–º–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø–æ –∞–¥—Ä–µ—Å—É (geocoding)? ‚ùì
- –ï—Å–ª–∏ –Ω–µ—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç ‚Üí –ø—Ä–æ—Å–∏—Ç—å —É–∫–∞–∑–∞—Ç—å –∏–ª–∏ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –±–µ–∑ –Ω–∏—Ö? ‚ùì
- –ú–æ–∂–µ—Ç –ª–∏ landlord –æ—Ç–ø—Ä–∞–≤–∏—Ç—å geo-—Ç–æ—á–∫—É –≤ –±–æ—Ç–µ? ‚úÖ (–¥–∞, Telegram –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç)

### 3. –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã
- –ú–æ–∂–µ—Ç –ª–∏ landlord –æ—Ç–ø—Ä–∞–≤–∏—Ç—å **–Ω–µ—Å–∫–æ–ª—å–∫–æ –æ–±—ä–µ–∫—Ç–æ–≤** –≤ –æ–¥–Ω–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏? ‚ùì
- –ò–ª–∏ –∫–∞–∂–¥—ã–π –æ–±—ä–µ–∫—Ç –æ—Ç–¥–µ–ª—å–Ω–æ? ‚úÖ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

### 4. –ß–µ—Ä–Ω–æ–≤–∏–∫–∏
- –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –Ω–µ–ø–æ–ª–Ω—ã–µ ‚Üí —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –∫–∞–∫ —á–µ—Ä–Ω–æ–≤–∏–∫? ‚úÖ
- Landlord –º–æ–∂–µ—Ç –≤–µ—Ä–Ω—É—Ç—å—Å—è –∏ –¥–æ–ø–æ–ª–Ω–∏—Ç—å? ‚úÖ

### 5. –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ú–æ–∂–µ—Ç –ª–∏ landlord —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–≤–æ—ë –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –ø–æ—Å–ª–µ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏? ‚ùì
- –£–¥–∞–ª—è—Ç—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ? ‚ùì

---

## üìù Instructions for AI Agent:

### Step 1: Validate Input
```javascript
const requiredFields = {
  property_name: 'string',
  bedrooms: 'number',
  price_per_night: 'number',
  photos: 'array',
  landlord_telegram_id: 'number',
  request_id: 'number'
};

const validation = validateFormData(formData, requiredFields);
if (!validation.valid) {
  return {
    status: 'incomplete',
    missing_fields: validation.missing,
    message: `–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ: ${validation.missing.join(', ')}`
  };
}
```

### Step 2: Download Photos from Telegram
```javascript
const downloadedPhotos = [];
for (const photoFileId of formData.photos) {
  try {
    const file = await bot.getFile(photoFileId);
    const fileUrl = `https://api.telegram.org/file/bot${BOT_TOKEN}/${file.file_path}`;
    
    // Download file
    const response = await fetch(fileUrl);
    const buffer = await response.arrayBuffer();
    
    // Upload to Supabase Storage
    const fileName = `${Date.now()}_${photoFileId}.jpg`;
    const { data, error } = await supabase.storage
      .from('properties')
      .upload(`${landlordTelegramId}/${fileName}`, buffer);
    
    if (error) throw error;
    
    downloadedPhotos.push(data.publicUrl);
  } catch (err) {
    console.error('Failed to download photo:', err);
  }
}

if (downloadedPhotos.length === 0) {
  return {
    status: 'error',
    error: 'No photos could be downloaded',
    message: '–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏'
  };
}
```

### Step 3: Create Property
```javascript
const { data: property, error: propertyError } = await supabase
  .from('properties')
  .insert({
    name: formData.property_name,
    bedrooms: formData.bedrooms,
    amenities: formData.amenities || [],
    price_per_night: formData.price_per_night,
    photos: downloadedPhotos,
    landlord_telegram_id: formData.landlord_telegram_id,
    lat: formData.lat || null,
    lng: formData.lng || null,
    address: formData.address || null,
    description: formData.description || null,
    created_at: new Date().toISOString()
  })
  .select()
  .single();

if (propertyError) throw propertyError;
```

### Step 4: Create Rental Offer
```javascript
const { data: offer, error: offerError } = await supabase
  .from('rental_offers')
  .insert({
    request_id: formData.request_id,
    property_id: property.id,
    landlord_telegram_id: formData.landlord_telegram_id,
    status: 'pending',
    created_at: new Date().toISOString()
  })
  .select()
  .single();

if (offerError) throw offerError;
```

### Step 5: Send Notifications
```javascript
// Notify landlord
await bot.sendMessage(
  formData.landlord_telegram_id,
  `‚úÖ –°–ø–∞—Å–∏–±–æ! –í–∞—à–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ.\n\n` +
  `üè† –û–±—ä–µ–∫—Ç: ${property.name}\n` +
  `üìã –ó–∞—è–≤–∫–∞: #${formData.request_id}\n\n` +
  `–ö–ª–∏–µ–Ω—Ç —É–≤–∏–¥–∏—Ç –≤–∞—à–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ –∫–∞—Ä—Ç–µ.`
);

// Notify client (get client telegram_id from request)
const { data: request } = await supabase
  .from('rental_requests')
  .select('client_telegram_id, location')
  .eq('id', formData.request_id)
  .single();

await bot.sendMessage(
  request.client_telegram_id,
  `üè† –ù–æ–≤–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –ø–æ –≤–∞—à–µ–π –∑–∞—è–≤–∫–µ!\n\n` +
  `${property.name}\n` +
  `üí∞ $${property.price_per_night}/–Ω–æ—á—å\n` +
  `üõèÔ∏è ${property.bedrooms} —Å–ø–∞–ª–µ–Ω\n\n` +
  `[–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –Ω–∞ –∫–∞—Ä—Ç–µ](https://yoursite.com/map?property=${property.id})`
);
```

### Step 6: Return Result
```javascript
return {
  status: 'success',
  property_id: property.id,
  rental_offer_id: offer.id,
  message: '–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ',
  created_at: property.created_at
};
```

---

## üß™ Expected Output:

**Success Case:**
```json
{
  "status": "success",
  "property_id": 456,
  "rental_offer_id": 789,
  "property_name": "Villa Sunset",
  "photos_uploaded": 5,
  "message": "–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ",
  "created_at": "2026-01-26T12:00:00Z"
}
```

**Incomplete Data:**
```json
{
  "status": "incomplete",
  "missing_fields": ["photos", "price_per_night"],
  "message": "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ: photos, price_per_night",
  "draft_saved": true,
  "draft_id": 123
}
```

**Error Case:**
```json
{
  "status": "error",
  "error": "Failed to create property in database",
  "message": "–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –æ–±—ä–µ–∫—Ç–∞",
  "details": "Database constraint violation"
}
```

---

## üí° Example Usage:

### Via Telegram Bot Webhook:
```javascript
// bot.js
bot.on('callback_query', async (callbackQuery) => {
  if (callbackQuery.data.startsWith('submit_offer_')) {
    const requestId = parseInt(callbackQuery.data.split('_')[2]);
    
    // Get form data from conversation
    const formData = getUserFormData(callbackQuery.from.id);
    formData.request_id = requestId;
    
    // Parse offer
    const result = await parseLandlordOffer(formData);
    
    // Send response
    await bot.sendMessage(callbackQuery.from.id, result.message);
  }
});
```

### Via Admin Panel:
```bash
POST /api/admin/skills/parse-landlord-offer/run
{
  "form_data": {
    "property_name": "Villa Sunset",
    "bedrooms": 3,
    "amenities": ["wifi", "pool", "kitchen"],
    "price_per_night": 150,
    "photos": ["file_id_1", "file_id_2"],
    "landlord_telegram_id": 123456789,
    "request_id": 42
  }
}
```

### Via Command Line:
```bash
node .agent/skills/parse-landlord-offer/scripts/parse.js \
  --property-name="Villa Sunset" \
  --bedrooms=3 \
  --price=150 \
  --photos=photo1.jpg,photo2.jpg \
  --landlord-id=123456789 \
  --request-id=42
```

---

## üì¶ Dependencies:

```json
{
  "node-telegram-bot-api": "^0.66.0",
  "@supabase/supabase-js": "^2.39.0",
  "axios": "^1.6.0",
  "sharp": "^0.33.0"
}
```

---

## üîê Environment Variables:

```env
TELEGRAM_BOT_TOKEN=1234567890:ABCdefGHIjklMNOpqrsTUVwxyz
SUPABASE_URL=https://xxx.supabase.co
SUPABASE_KEY=xxx
SUPABASE_STORAGE_BUCKET=properties
```

---

## ‚ö†Ô∏è Notes:

- **–¢–µ—Å—Ç–æ–≤–∞—è –≤–µ—Ä—Å–∏—è:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç mock –¥–∞–Ω–Ω—ã–µ –±–µ–∑ —Ä–µ–∞–ª—å–Ω–æ–≥–æ Telegram API
- **–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏:** –í —Ç–µ—Å—Ç–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è placeholder —Å—Å—ã–ª–∫–∏
- **Production:** –¢—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫—É Telegram webhook –∏ Supabase Storage
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:** –ü—Ä–æ–≤–µ—Ä—è—Ç—å —á—Ç–æ landlord –∏–º–µ–µ—Ç –ø—Ä–∞–≤–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è
- **Rate limiting:** –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π –æ—Ç –æ–¥–Ω–æ–≥–æ landlord
- **–ú–æ–¥–µ—Ä–∞—Ü–∏—è:** –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π –ø–µ—Ä–µ–¥ –ø—É–±–ª–∏–∫–∞—Ü–∏–µ–π

---

## üöÄ Future Enhancements:

1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç** –ø–æ –∞–¥—Ä–µ—Å—É (geocoding)
2. **AI-–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –æ–ø–∏—Å–∞–Ω–∏—è** –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ñ–æ—Ç–æ –∏ –¥–∞–Ω–Ω—ã—Ö
3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤** - –Ω–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ property
4. **–ú—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ—Å—Ç—å** - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –æ–ø–∏—Å–∞–Ω–∏–π –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —è–∑—ã–∫–∞—Ö
5. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ñ–æ—Ç–æ** - —Å–∂–∞—Ç–∏–µ, —Ä–µ—Å–∞–π–∑, watermark
6. **–í–∞–ª–∏–¥–∞—Ü–∏—è —Ü–µ–Ω** - –ø—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ —Ü–µ–Ω–∞ –≤ —Ä–∞–∑—É–º–Ω—ã—Ö –ø—Ä–µ–¥–µ–ª–∞—Ö
7. **–ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π** - –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–π –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π
