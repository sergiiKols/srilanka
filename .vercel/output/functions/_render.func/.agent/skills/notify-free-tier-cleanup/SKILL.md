## Name: Notify Free Tier Cleanup

## Description:
–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞–º –Ω–∞ –±–µ—Å–ø–ª–∞—Ç–Ω–æ–º —Ç–∞—Ä–∏—Ñ–µ –æ —Å–∫–æ—Ä–æ–º —É–¥–∞–ª–µ–Ω–∏–∏ –∏—Ö –∫–∞—Ä—Ç—ã

## Purpose:
–ó–∞ –¥–µ–Ω—å-–¥–≤–∞ –¥–æ —É–¥–∞–ª–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ —Å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ–º –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ –ø–ª–∞—Ç–Ω—ã–π —Ç–∞—Ä–∏—Ñ.

---

## –ù–ê–ó–ù–ê–ß–ï–ù–ò–ï
–£–≤–µ–¥–æ–º–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–æ–≤ –Ω–∞ –±–µ—Å–ø–ª–∞—Ç–Ω–æ–º —Ç–∞—Ä–∏—Ñ–µ –æ —Å–∫–æ—Ä–æ–º —É–¥–∞–ª–µ–Ω–∏–∏ –∫–∞—Ä—Ç—ã

## –ö–û–ì–î–ê –ó–ê–ü–£–°–ö–ê–ï–¢–°–Ø
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –∫–∞–∂–¥—ã–π –¥–µ–Ω—å
- –ó–∞ 1 –¥–µ–Ω—å –¥–æ —É–¥–∞–ª–µ–Ω–∏—è –∑–∞—è–≤–∫–∏ (–Ω–∞ –æ—Å–Ω–æ–≤–µ retention_days)

## –ß–¢–û –ù–ê –í–•–û–î–ï
- `client_id`
- `request_id`
- `days_remaining` (–æ–±—ã—á–Ω–æ 1)

## –ß–¢–û –ù–ê –í–´–•–û–î–ï
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ Telegram
- –õ–æ–≥–∏—Ä—É–µ—Ç—Å—è –≤ –ë–î

## –ß–¢–û –°–ò–°–¢–ï–ú–ê –î–ï–õ–ê–ï–¢

### –®–∞–≥ 1: –ü–æ–∏—Å–∫ –∑–∞—è–≤–æ–∫ –∫ —É–¥–∞–ª–µ–Ω–∏—é
```sql
SELECT * FROM rental_requests
WHERE check_out < (NOW() + INTERVAL '1 day')
  AND status != 'archived'
  AND user_tier = 'free'
```

### –®–∞–≥ 2: –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
```javascript
const message = `
‚ö†Ô∏è –í–∞–∂–Ω–æ!

–¢–≤–æ—è –∫–∞—Ä—Ç–∞ –ø–æ–∏—Å–∫–∞ –∂–∏–ª—å—è –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω–∞ –∑–∞–≤—Ç—Ä–∞.

–ï—Å–ª–∏ —Ö–æ—á–µ—à—å —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –µ—ë –¥–æ–ª—å—à–µ ‚Üí –æ–±–Ω–æ–≤–∏—Å—å –Ω–∞ –ø–ª–∞—Ç–Ω—ã–π —Ç–∞—Ä–∏—Ñ:
üí≥ –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–ª–∞–Ω—ã [—Å—Å—ã–ª–∫–∞]
`;

await bot.sendMessage(client_telegram_id, message);
```

### –®–∞–≥ 3: –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
```javascript
await supabase.from('cleanup_notifications').insert({
  client_id, request_id, sent_at: new Date()
});
```

## –í–ê–ñ–ù–´–ï –í–û–ü–†–û–°–´
- **–î–Ω–∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è:** 1 –¥–µ–Ω—å –¥–æ —É–¥–∞–ª–µ–Ω–∏—è
- **–¢–µ–∫—Å—Ç:** –°–º. –≤—ã—à–µ
- **–ö–Ω–æ–ø–∫–∞ –æ–ø–ª–∞—Ç—ã:** –î–∞, inline –∫–Ω–æ–ø–∫–∞ "üí≥ –û–ø–ª–∞—Ç–∏—Ç—å"
- **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è:** –ù–µ—Ç, —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ

## Expected Output
```json
{
  "notifications_sent": 5,
  "clients_notified": [101, 102, 103, 104, 105]
}
```
