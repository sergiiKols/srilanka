# üîç –ê–ù–ê–õ–ò–ó: –ü–æ—á–µ–º—É –∞–¥–º–∏–Ω –∫–∞—Ä—Ç–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ, –Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ Vercel?

## üìã –ì–ò–ü–û–¢–ï–ó–ê: –ü—Ä–æ–±–ª–µ–º–∞ —Å webhook –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è

---

## ‚úÖ –ß–¢–û –†–ê–ë–û–¢–ê–ï–¢:

### **Production (Vercel):**
- ‚úÖ –ê–¥–º–∏–Ω—Å–∫–∞—è –∫–∞—Ä—Ç–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
- ‚úÖ API `/api/saved-properties` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ
- ‚úÖ –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∞—è –∫–∞—Ä—Ç–∞ –≤ Telegram —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ Telegram Bot webhook —Ä–∞–±–æ—Ç–∞–µ—Ç

### **Local (–ü–ö):**
- ‚úÖ –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –Ω–∞ :4321
- ‚úÖ API `/api/saved-properties` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 3 –æ–±—ä–µ–∫—Ç–∞ (200 OK)
- ‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ `/admin/master-map` –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è (200 OK, 102KB)
- ‚ùå **–ê–¥–º–∏–Ω—Å–∫–∞—è –∫–∞—Ä—Ç–∞ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è** (–ø—É—Å—Ç–æ–π —ç–∫—Ä–∞–Ω / –æ—à–∏–±–∫–∞ ZoomSlider)

---

## üîç –ê–ù–ê–õ–ò–ó –ö–û–î–ê:

### **1. Telegram Bot Webhook**

**–§–∞–π–ª:** `src/pages/api/telegram-webhook.ts`

**–ü—Ä–æ–±–ª–µ–º–∞:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `import.meta.env.TELEGRAM_BOT_TOKEN` –≤–æ –º–Ω–æ–≥–∏—Ö –º–µ—Å—Ç–∞—Ö:
- –°—Ç—Ä–æ–∫–∞ 125, 284, 419, 442, 461, 475, 490, 507, 525, 540, 560, 623, 640, 688, 699, 719

**–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç:**
- Webhook **–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è** `TELEGRAM_BOT_TOKEN`
- –ù–∞ Vercel —ç—Ç–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –ø—Ä–æ–µ–∫—Ç–∞
- **–ù–∞ –ª–æ–∫–∞–ª—å–Ω–æ–º –ü–ö** —ç—Ç–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è **–ù–ï —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞** (–Ω–µ—Ç `.env` —Ñ–∞–π–ª–∞)

---

### **2. AdminMasterMap –∫–æ–º–ø–æ–Ω–µ–Ω—Ç**

**–ù–ï –∑–∞–≤–∏—Å–∏—Ç –æ—Ç webhook –Ω–∞–ø—Ä—è–º—É—é!**

AdminMasterMap —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑:
1. `loadClientProperties()` ‚Üí –∑–∞–ø—Ä–æ—Å –∫ `/api/saved-properties`
2. API endpoint —á–∏—Ç–∞–µ—Ç –∏–∑ Supabase
3. Supabase credentials **hardcoded** –≤ –∫–æ–¥–µ

**–í—ã–≤–æ–¥:** AdminMasterMap –ù–ï –¥–æ–ª–∂–Ω–∞ –∑–∞–≤–∏—Å–µ—Ç—å –æ—Ç webhook!

---

## üêõ –ù–ê–°–¢–û–Ø–©–ê–Ø –ü–†–û–ë–õ–ï–ú–ê:

### **ZoomSlider Error:**
```
@vitejs/plugin-react can't detect preamble. Something is wrong.
```

**–≠—Ç–æ –ù–ï –ø—Ä–æ–±–ª–µ–º–∞ webhook!** –≠—Ç–æ –ø—Ä–æ–±–ª–µ–º–∞ —Å:
1. **Vite –∫–µ—à** - —Å—Ç–∞—Ä—ã–µ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
2. **React –ø–ª–∞–≥–∏–Ω** - –∫–æ–Ω—Ñ–ª–∏–∫—Ç –≤–µ—Ä—Å–∏–π –∏–ª–∏ Hot Module Replacement
3. **–ò–º–ø–æ—Ä—Ç—ã** - circular dependencies

---

## üéØ –î–û–ö–ê–ó–ê–¢–ï–õ–¨–°–¢–í–û –ì–ò–ü–û–¢–ï–ó–´:

### **–¢–µ—Å—Ç 1: API —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ**
```
‚úÖ GET /api/saved-properties ‚Üí 200 OK, 3 objects
```
**–í—ã–≤–æ–¥:** Supabase –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç!

### **–¢–µ—Å—Ç 2: –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è**
```
‚úÖ GET /admin/master-map ‚Üí 200 OK, 102KB HTML
```
**–í—ã–≤–æ–¥:** –ú–∞—Ä—à—Ä—É—Ç–∏–Ω–≥ —Ä–∞–±–æ—Ç–∞–µ—Ç!

### **–¢–µ—Å—Ç 3: –û—à–∏–±–∫–∞ –≤ ZoomSlider**
```
‚ùå ZoomSlider.tsx:38 - @vitejs/plugin-react error
```
**–í—ã–≤–æ–¥:** –ü—Ä–æ–±–ª–µ–º–∞ –≤ –∫–æ–º–ø–∏–ª–µ–Ω—Ü–∏–∏ React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞!

---

## üîß –ì–î–ï –ù–ê –°–ê–ú–û–ú –î–ï–õ–ï –ü–†–û–ë–õ–ï–ú–ê:

### **ZoomSlider.tsx —Å—Ç—Ä–æ–∫–∞ 38:**

–ù—É–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —á—Ç–æ —Ç–∞–º –Ω–∞ —Å—Ç—Ä–æ–∫–µ 38.

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**
1. **–°—Ç–∞—Ä—ã–π –∫–µ—à Vite** - –ø–æ—Å–ª–µ –º–Ω–æ–≥–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –Ω–∞–∫–æ–ø–∏–ª—Å—è –º—É—Å–æ—Ä
2. **HMR (Hot Module Replacement)** - –∫–æ–Ω—Ñ–ª–∏–∫—Ç –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏
3. **Circular import** - ZoomSlider ‚Üí Map ‚Üí AdminMasterMap ‚Üí ZoomSlider
4. **React –≤–µ—Ä—Å–∏—è** - –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –≤–µ—Ä—Å–∏–π

---

## üåê –ü–û–ß–ï–ú–£ –ù–ê VERCEL –†–ê–ë–û–¢–ê–ï–¢?

### **Production build vs Dev server:**

**–ù–∞ Vercel:**
- `npm run build` - **–ø–æ–ª–Ω–∞—è —Å–±–æ—Ä–∫–∞** —Å –Ω—É–ª—è
- –í—Å–µ —Ñ–∞–π–ª—ã –∫–æ–º–ø–∏–ª–∏—Ä—É—é—Ç—Å—è –∑–∞–Ω–æ–≤–æ
- –ù–µ—Ç HMR, –Ω–µ—Ç dev –∫–µ—à–∞
- –ú–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∫–æ–¥–∞
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –í—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç —á–∏—Å—Ç–æ

**–ù–∞ –ª–æ–∫–∞–ª—å–Ω–æ–º –ü–ö:**
- `npm run dev` - **development —Ä–µ–∂–∏–º**
- Vite –∫–µ—à–∏—Ä—É–µ—Ç –º–æ–¥—É–ª–∏ –≤ `node_modules/.vite`
- HMR –æ–±–Ω–æ–≤–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- –°—Ç–∞—Ä—ã–π –∫–µ—à –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –º—É—Å–æ—Ä
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã –∏ –æ—à–∏–±–∫–∏

---

## üìä –°–†–ê–í–ù–ï–ù–ò–ï:

| –ü–∞—Ä–∞–º–µ—Ç—Ä | Vercel (Production) | Local (Dev) |
|----------|---------------------|-------------|
| Build mode | Production | Development |
| –ö–µ—à | –ß–∏—Å—Ç—ã–π | –ú–æ–∂–µ—Ç –±—ã—Ç—å —Å—Ç–∞—Ä—ã–º |
| HMR | –ù–µ—Ç | –î–∞ (–º–æ–∂–µ—Ç –≥–ª—é—á–∏—Ç—å) |
| –ú–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è | –î–∞ | –ù–µ—Ç |
| Source maps | –ù–µ—Ç | –î–∞ |
| –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è | –ò–∑ Vercel Settings | –ò–∑ .env (–µ—Å–ª–∏ –µ—Å—Ç—å) |
| Telegram Webhook | –†–∞–±–æ—Ç–∞–µ—Ç (–ø—É–±–ª–∏—á–Ω—ã–π URL) | **–ù–ï —Ä–∞–±–æ—Ç–∞–µ—Ç** (localhost) |

---

## üéØ –í–´–í–û–î –ü–û –ì–ò–ü–û–¢–ï–ó–ï:

### **‚ùå –ì–∏–ø–æ—Ç–µ–∑–∞ –ù–ï–í–ï–†–ù–ê:**

**–ê–¥–º–∏–Ω—Å–∫–∞—è –∫–∞—Ä—Ç–∞ –ù–ï —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ –ù–ï –∏–∑-–∑–∞ webhook!**

**–ù–∞—Å—Ç–æ—è—â–∏–µ –ø—Ä–∏—á–∏–Ω—ã:**

1. **ZoomSlider compilation error** - –ø—Ä–æ–±–ª–µ–º–∞ —Å React –ø–ª–∞–≥–∏–Ω–æ–º
2. **Vite –∫–µ—à** - –Ω–∞–∫–æ–ø–∏–ª—Å—è –º—É—Å–æ—Ä –ø–æ—Å–ª–µ –º–Ω–æ–≥–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
3. **HMR –∫–æ–Ω—Ñ–ª–∏–∫—Ç** - Hot Module Replacement –≥–ª—é—á–∏—Ç

### **‚úÖ Webhook –ù–ï –≤–ª–∏—è–µ—Ç –Ω–∞ AdminMasterMap –ø–æ—Ç–æ–º—É —á—Ç–æ:**

1. AdminMasterMap –∑–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ `/api/saved-properties`
2. `/api/saved-properties` —á–∏—Ç–∞–µ—Ç –Ω–∞–ø—Ä—è–º—É—é –∏–∑ Supabase (hardcoded credentials)
3. Webhook –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è **–ø—Ä–∏—ë–º–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –æ—Ç Telegram**
4. Webhook **–ù–ï –Ω—É–∂–µ–Ω** –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–∞—Ä—Ç—ã!

---

## üîß –ß–¢–û –ú–û–ñ–ù–û –ü–†–û–í–ï–†–ò–¢–¨:

### **–¢–µ—Å—Ç A: Webhook –ª–æ–∫–∞–ª—å–Ω–æ (–ù–ï —Ä–∞–±–æ—Ç–∞–µ—Ç)**
```bash
# Telegram –Ω–µ –º–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç—å webhook –Ω–∞ localhost
# –ù—É–∂–µ–Ω –ø—É–±–ª–∏—á–Ω—ã–π URL (ngrok, localtunnel, etc)
```

### **–¢–µ—Å—Ç B: AdminMasterMap –±–µ–∑ webhook (–î–û–õ–ñ–ù–ê —Ä–∞–±–æ—Ç–∞—Ç—å)**
```bash
# –ö–∞—Ä—Ç–∞ –ù–ï –∑–∞–≤–∏—Å–∏—Ç –æ—Ç webhook
# –û–Ω–∞ —á–∏—Ç–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –Ω–∞–ø—Ä—è–º—É—é –∏–∑ API
```

### **–¢–µ—Å—Ç C: Production build –ª–æ–∫–∞–ª—å–Ω–æ (–î–û–õ–ñ–ù–ê —Ä–∞–±–æ—Ç–∞—Ç—å)**
```bash
npm run build
npm run preview
# –û—Ç–∫—Ä—ã—Ç—å http://localhost:4321/admin/master-map
```

–ï—Å–ª–∏ –Ω–∞ preview —Ä–∞–±–æ—Ç–∞–µ—Ç ‚Üí –ø—Ä–æ–±–ª–µ–º–∞ –≤ dev —Ä–µ–∂–∏–º–µ (–∫–µ—à/HMR)
–ï—Å–ª–∏ –Ω–∞ preview –ù–ï —Ä–∞–±–æ—Ç–∞–µ—Ç ‚Üí –ø—Ä–æ–±–ª–µ–º–∞ –≤ –∫–æ–¥–µ

---

## üí° –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò:

### **1. –ü—Ä–æ–±–ª–µ–º–∞ —Å –ª–æ–∫–∞–ª—å–Ω–æ–π –∫–∞—Ä—Ç–æ–π - —ç—Ç–æ –ù–ï webhook**
- Webhook –Ω—É–∂–µ–Ω —Ç–æ–ª—å–∫–æ –¥–ª—è –ø—Ä–∏—ë–º–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –æ—Ç Telegram
- AdminMasterMap —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ API, –∫–æ—Ç–æ—Ä–æ–µ —á–∏—Ç–∞–µ—Ç –∏–∑ Supabase
- –ù–∞ Vercel –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç ‚Üí –∫–æ–¥ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π

### **2. –†–µ—à–µ–Ω–∏–µ:**
```bash
# –û—á–∏—Å—Ç–∏–ª–∏ –∫–µ—à - —É–∂–µ —Å–¥–µ–ª–∞–Ω–æ
# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏–ª–∏ —Å–µ—Ä–≤–µ—Ä - —É–∂–µ —Å–¥–µ–ª–∞–Ω–æ
# –ï—Å–ª–∏ –Ω–µ –ø–æ–º–æ–≥–ª–æ ‚Üí –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å production build
npm run build
npm run preview
```

### **3. Webhook –ª–æ–∫–∞–ª—å–Ω–æ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ):**
```bash
# –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è webhook –ª–æ–∫–∞–ª—å–Ω–æ –Ω—É–∂–µ–Ω —Ç—É–Ω–Ω–µ–ª—å:
npx ngrok http 4321
# –ü–æ—Ç–æ–º —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å webhook:
curl -X POST https://api.telegram.org/bot<TOKEN>/setWebhook \
  -d url=https://xxxx.ngrok.io/api/telegram-webhook
```

**–ù–û!** –î–ª—è –∞–¥–º–∏–Ω—Å–∫–æ–π –∫–∞—Ä—Ç—ã webhook **–ù–ï –ù–£–ñ–ï–ù!**

---

## üéØ –§–ò–ù–ê–õ–¨–ù–´–ô –û–¢–í–ï–¢:

**–¢–≤–æ—è –≥–∏–ø–æ—Ç–µ–∑–∞ –ø—Ä–æ webhook - –ù–ï–í–ï–†–ù–ê –¥–ª—è –∞–¥–º–∏–Ω—Å–∫–æ–π –∫–∞—Ä—Ç—ã.**

**–ù–æ –í–ï–†–ù–ê –¥–ª—è Telegram –±–æ—Ç–∞:**
- Telegram Bot webhook **–ù–ï —Ä–∞–±–æ—Ç–∞–µ—Ç** –Ω–∞ localhost
- –ù—É–∂–µ–Ω –ø—É–±–ª–∏—á–Ω—ã–π HTTPS URL (–Ω–∞ Vercel —Ä–∞–±–æ—Ç–∞–µ—Ç)
- –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –±–æ—Ç–∞ –ª–æ–∫–∞–ª—å–Ω–æ –Ω—É–∂–µ–Ω ngrok/localtunnel

**–ê–¥–º–∏–Ω—Å–∫–∞—è –∫–∞—Ä—Ç–∞ –ª–æ–∫–∞–ª—å–Ω–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–∑-–∑–∞:**
- ZoomSlider compilation error (React –ø–ª–∞–≥–∏–Ω)
- –°—Ç–∞—Ä—ã–π Vite –∫–µ—à (—É–∂–µ –æ—á–∏—Å—Ç–∏–ª–∏)
- HMR –∫–æ–Ω—Ñ–ª–∏–∫—Ç (—É–∂–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏–ª–∏)

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞!
