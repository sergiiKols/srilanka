# ‚úÖ –°—Ç–∞—Ç—É—Å –∫–Ω–æ–ø–∫–∏ "Show Archived" –≤ Admin Panel

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏: **–†–ï–ê–õ–ò–ó–û–í–ê–ù–û**

---

## üéØ –ß—Ç–æ –±—ã–ª–æ –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ

### 1. ‚úÖ –ö–æ–¥ –∫–Ω–æ–ø–∫–∏ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
**–§–∞–π–ª:** `src/components/admin/AdminMasterMap.tsx`
**–°—Ç—Ä–æ–∫–∏:** 1161-1171

```tsx
{/* Show Archived Toggle */}
<label className="flex items-center space-x-2 cursor-pointer p-3 bg-slate-50 rounded-lg hover:bg-slate-100 transition-colors mt-2">
    <input
        type="checkbox"
        checked={showArchived}
        onChange={(e) => setShowArchived(e.target.checked)}
        className="w-4 h-4 text-indigo-600 rounded"
    />
    <span className="text-sm font-medium text-slate-700">
        Show Archived ({archivedProperties.length})
    </span>
</label>
```

---

### 2. ‚úÖ State —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- **State –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è:** `showArchived` (—Å—Ç—Ä–æ–∫–∞ 37)
- **–ù–∞—á–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ:** `false`
- **–û–±—Ä–∞–±–æ—Ç—á–∏–∫:** `setShowArchived(e.target.checked)`

---

### 3. ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞
**–§—É–Ω–∫—Ü–∏—è:** `loadArchivedProperties()` (—Å—Ç—Ä–æ–∫–∏ 152-236)

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
1. –ó–∞–≥—Ä—É–∂–∞–µ—Ç –∏–∑ —Ç–∞–±–ª–∏—Ü—ã `archived_properties`
2. –§–∏–ª—å—Ç—Ä—É–µ—Ç –ø–æ `can_restore = true` (—Ç–æ–ª—å–∫–æ –Ω–µ–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ)
3. –ü—Ä–∏–º–µ–Ω—è–µ—Ç —Ñ–∏–ª—å—Ç—Ä—ã –ø–æ –¥–∞—Ç–µ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
4. –î–æ–±–∞–≤–ª—è–µ—Ç –ø—Ä–µ—Ñ–∏–∫—Å `[ARCHIVED]` –∫ –Ω–∞–∑–≤–∞–Ω–∏—é
5. –ú–∞—Ä–∫–∏—Ä—É–µ—Ç –æ–±—ä–µ–∫—Ç—ã –∫–∞–∫ `isArchived: true`

---

### 4. ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞ –∫–∞—Ä—Ç–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
**–ú–µ—Å—Ç–æ:** –°—Ç—Ä–æ–∫–∏ 407-415

```tsx
// –î–æ–±–∞–≤–ª—è–µ–º –∞—Ä—Ö–∏–≤–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã –µ—Å–ª–∏ showArchived = true
...(showArchived ? archivedProperties.map(p => {
    const color = getHeatmapColor(p);
    console.log(`üé® Mapping archived property: ${p.title}, color: ${color}`);
    return {
        ...p,
        markerColor: color,
        opacity: 0.5 // –ü–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–µ –º–∞—Ä–∫–µ—Ä—ã –¥–ª—è –∞—Ä—Ö–∏–≤–Ω—ã—Ö
    };
}) : [])
```

---

### 5. ‚úÖ –í–∏–∑—É–∞–ª—å–Ω–æ–µ –æ—Ç–ª–∏—á–∏–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
**–§—É–Ω–∫—Ü–∏—è:** `getHeatmapColor()` (—Å—Ç—Ä–æ–∫–∏ 351-394)

**–ê—Ä—Ö–∏–≤–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã:**
- üé® –¶–≤–µ—Ç: `#9ca3af` (—Å–µ—Ä—ã–π)
- üëª –ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å: `0.5`
- üè∑Ô∏è –ü—Ä–µ—Ñ–∏–∫—Å –Ω–∞–∑–≤–∞–Ω–∏—è: `[ARCHIVED]`

---

## üìç –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–∏

**Admin Panel drawer ‚Üí –ø—Ä–∞–≤–∞—è —Å—Ç–æ—Ä–æ–Ω–∞ —ç–∫—Ä–∞–Ω–∞**

–ö–Ω–æ–ø–∫–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ Admin Panel (—Å—Ç—Ä–æ–∫–∏ 1021-1199):
- –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –∫–ª–∏–∫–æ–º –Ω–∞ –∫–Ω–æ–ø–∫—É "Admin" (—Å–ø—Ä–∞–≤–∞ –≤–≤–µ—Ä—Ö—É)
- –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∞ –ø–æ—Å–ª–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤ –ø–æ –¥–∞—Ç–µ
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞—Ä—Ö–∏–≤–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –≤ —Å–∫–æ–±–∫–∞—Ö

---

## üîÑ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞

### –®–∞–≥ 1: –û—Ç–∫—Ä—ã—Ç—å Admin Panel
1. –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ `/admin/master-map`
2. –ù–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É **"‚öôÔ∏è Admin"** (—Å–ø—Ä–∞–≤–∞ –≤–≤–µ—Ä—Ö—É)

### –®–∞–≥ 2: –í–∫–ª—é—á–∏—Ç—å Show Archived
3. –ü—Ä–æ–∫—Ä—É—Ç–∏—Ç—å –≤–Ω–∏–∑ –¥–æ —Å–µ–∫—Ü–∏–∏ "Date Filter"
4. –ü–æ–¥ –≤—ã–ø–∞–¥–∞—é—â–∏–º —Å–ø–∏—Å–∫–æ–º –¥–∞—Ç —É–≤–∏–¥–µ—Ç—å —á–µ–∫–±–æ–∫—Å **"Show Archived (N)"**
5. –í–∫–ª—é—á–∏—Ç—å —á–µ–∫–±–æ–∫—Å

### –®–∞–≥ 3: –†–µ–∑—É–ª—å—Ç–∞—Ç
- –ù–∞ –∫–∞—Ä—Ç–µ –ø–æ—è–≤—è—Ç—Å—è —Å–µ—Ä—ã–µ –ø–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–µ –º–∞—Ä–∫–µ—Ä—ã
- –û–±—ä–µ–∫—Ç—ã –±—É–¥—É—Ç –∏–º–µ—Ç—å –ø—Ä–µ—Ñ–∏–∫—Å `[ARCHIVED]` –≤ –Ω–∞–∑–≤–∞–Ω–∏–∏
- –ü—Ä–∏ –∫–ª–∏–∫–µ –æ—Ç–∫—Ä–æ–µ—Ç—Å—è PropertyDrawer —Å –ø–æ–ª–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π

---

## üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü–∞: `archived_properties`
**–§–∞–π–ª —Å–æ–∑–¥–∞–Ω–∏—è:** `database/06_create_archived_properties_table.sql`

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
- –í—Å–µ –ø–æ–ª—è –∏–∑ `saved_properties`
- `archived_at` - –≤—Ä–µ–º—è –∞—Ä—Ö–∏–≤–∞—Ü–∏–∏
- `archive_reason` - –ø—Ä–∏—á–∏–Ω–∞ (user_deleted, expired, etc.)
- `can_restore` - –º–æ–∂–Ω–æ –ª–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
- `days_active` - —Å–∫–æ–ª—å–∫–æ –¥–Ω–µ–π –±—ã–ª –∞–∫—Ç–∏–≤–µ–Ω
- `original_created_at` - –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è

---

## üêõ –ß—Ç–æ –º–æ–≥–ª–æ –ø–æ–π—Ç–∏ –Ω–µ —Ç–∞–∫?

### –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:

#### 1. –ö–Ω–æ–ø–∫–∞ –Ω–µ –≤–∏–¥–Ω–∞
**–ü—Ä–∏—á–∏–Ω–∞:** Admin Panel –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –∫–Ω–æ–ø–∫–∞ "Admin" (—Å–ø—Ä–∞–≤–∞ –≤–≤–µ—Ä—Ö—É) –∫–ª–∏–∫–∞–±–µ–ª—å–Ω–∞

#### 2. –ö–Ω–æ–ø–∫–∞ –µ—Å—Ç—å, –Ω–æ –∞—Ä—Ö–∏–≤–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ 0
**–ü—Ä–∏—á–∏–Ω–∞:** –í –±–∞–∑–µ –Ω–µ—Ç –∞—Ä—Ö–∏–≤–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π
**–†–µ—à–µ–Ω–∏–µ:** 
```sql
-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ –¥–∞–Ω–Ω—ã—Ö
SELECT COUNT(*) FROM archived_properties WHERE can_restore = TRUE;
```

#### 3. –û–±—ä–µ–∫—Ç—ã –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –Ω–∞ –∫–∞—Ä—Ç–µ
**–ü—Ä–∏—á–∏–Ω–∞:** –ü—Ä–æ–±–ª–µ–º–∞ —Å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏ –∏–ª–∏ —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ –æ—à–∏–±–∫–∏

#### 4. –û–±—ä–µ–∫—Ç—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ
**–ü—Ä–∏—á–∏–Ω–∞:** –ü—Ä–æ–±–ª–µ–º–∞ —Å —Ü–≤–µ—Ç–æ–º –∏–ª–∏ –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å—é
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `getHeatmapColor()`

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –î–ª—è –ø–æ–ª–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```sql
-- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–∞–π–ª: tmp_rovodev_test_archived.sql
-- 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü—ã
-- 2. –ü–æ–¥—Å—á—ë—Ç –∞—Ä—Ö–∏–≤–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤
-- 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
-- 4. –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 5 –∑–∞–ø–∏—Å–µ–π
-- 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ RLS –ø–æ–ª–∏—Ç–∏–∫
```

---

## üìù –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

**–ö–æ–º–º–∏—Ç:** `c8ea6bd` - feat: –î–æ–±–∞–≤–ª–µ–Ω –ø—Ä–æ—Å–º–æ—Ç—Ä –∞—Ä—Ö–∏–≤–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –≤ Admin Map
**–î–∞—Ç–∞:** 31 —è–Ω–≤–∞—Ä—è 2026, 13:54

**–ß—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ:**
- ‚úÖ –ö–Ω–æ–ø–∫–∞ Show Archived –≤ Admin Panel
- ‚úÖ –§—É–Ω–∫—Ü–∏—è loadArchivedProperties
- ‚úÖ –ü—Ä–µ—Ñ–∏–∫—Å archived- –¥–ª—è ID
- ‚úÖ –°–µ—Ä—ã–π —Ü–≤–µ—Ç –∏ –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å 0.5
- ‚úÖ –ü—Ä–µ—Ñ–∏–∫—Å [ARCHIVED] –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ
- ‚úÖ –§–∏–ª—å—Ç—Ä—ã –ø–æ –¥–∞—Ç–µ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –≤ –∫–Ω–æ–ø–∫–µ

---

## ‚úÖ –í—ã–≤–æ–¥

**–ö–Ω–æ–ø–∫–∞ "Show Archived" –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç.**

–ï—Å–ª–∏ –≤—ã –Ω–µ –≤–∏–¥–∏—Ç–µ –∫–Ω–æ–ø–∫—É –∏–ª–∏ –æ–Ω–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –ø–æ—Å–ª–µ–¥–Ω—é—é –≤–µ—Ä—Å–∏—é –∫–æ–¥–∞ (–∫–æ–º–º–∏—Ç `c8ea6bd` –∏–ª–∏ –Ω–æ–≤–µ–µ)
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ Admin Panel –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è (–∫–Ω–æ–ø–∫–∞ "Admin" —Å–ø—Ä–∞–≤–∞ –≤–≤–µ—Ä—Ö—É)
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫ JavaScript
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –∞—Ä—Ö–∏–≤–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π

---

## üîç –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –æ—Ç–ª–∞–¥–∫–∞

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –æ—Å—Ç–∞—ë—Ç—Å—è, –æ—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

```javascript
// –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –ø–æ—Å–ª–µ –≤–∫–ª—é—á–µ–Ω–∏—è Show Archived:
// –î–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –ª–æ–≥–∏:
// üì¶ –ó–∞–≥—Ä—É–∂–∞–µ–º –∞—Ä—Ö–∏–≤–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã –∏–∑ archived_properties
// ‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω–æ N –∞—Ä—Ö–∏–≤–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤
// üé® Mapping archived property: [ARCHIVED] Property Name, color: #9ca3af
```

---

**–î–∞—Ç–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏:** 31 —è–Ω–≤–∞—Ä—è 2026
**–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ Rovo Dev:** ‚úÖ –ö–æ–¥ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
