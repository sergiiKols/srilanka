## Name: Store Property Photos

## Description:
–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π –æ–±—ä–µ–∫—Ç–∞ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏ –∏–∑ Telegram –≤ Supabase Storage —Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π –ø–æ—Å—Ç–æ—è–Ω–Ω—ã—Ö URL

## Purpose:
–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –∏–∑ Telegram –Ω—É–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –Ω–∞–¥–µ–∂–Ω–æ–º –º–µ—Å—Ç–µ (Supabase Storage), —á—Ç–æ–±—ã –æ–Ω–∏ –Ω–µ –∑–∞–≤–∏—Å–µ–ª–∏ –æ—Ç Telegram, –º–æ–∂–Ω–æ –±—ã–ª–æ –±—ã—Å—Ç—Ä–æ –∑–∞–≥—Ä—É–∂–∞—Ç—å –∏—Ö –Ω–∞ –∫–∞—Ä—Ç—É, –∏ —Å—Å—ã–ª–∫–∏ –±—ã–ª–∏ –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–µ –∏ –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ.

---

## üìã –ü–û–õ–ù–û–ï –û–ü–ò–°–ê–ù–ò–ï –ó–ê–î–ê–ß–ò

### –ù–ê–ó–ù–ê–ß–ï–ù–ò–ï
–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –∏–∑ Telegram –Ω—É–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –Ω–∞–¥–µ–∂–Ω–æ–º –º–µ—Å—Ç–µ (Supabase Storage), —á—Ç–æ–±—ã:
- **–ù–µ –∑–∞–≤–∏—Å–µ–ª–∏ –æ—Ç Telegram** - Telegram –º–æ–∂–µ—Ç —É–¥–∞–ª–∏—Ç—å —Ñ–∞–π–ª—ã —á–µ—Ä–µ–∑ –≤—Ä–µ–º—è
- **–ë—ã—Å—Ç—Ä–∞—è –∑–∞–≥—Ä—É–∑–∫–∞** - –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–æ—Ç–æ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –±—ã—Å—Ç—Ä–µ–µ
- **–ü–æ—Å—Ç–æ—è–Ω–Ω—ã–µ —Å—Å—ã–ª–∫–∏** - URL –Ω–µ –º–µ–Ω—è—é—Ç—Å—è
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –∫–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞ —á–µ—Ä–µ–∑ Supabase

### –ö–û–ì–î–ê –ó–ê–ü–£–°–ö–ê–ï–¢–°–Ø
- **–í–æ –≤—Ä–µ–º—è SKILL #2** (`parse-landlord-offer`), –∫–æ–≥–¥–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è —Ñ–æ—Ç–æ –∏–∑ —Ñ–æ—Ä–º—ã
- –°—Ä–∞–∑—É –ø–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è `telegram_file_ids` –æ—Ç landlord
- –ü–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º property –≤ –ë–î

### –ß–¢–û –ù–ê –í–•–û–î–ï

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `telegram_file_ids` (array) - —Å–ø–∏—Å–æ–∫ ID —Ñ–∞–π–ª–æ–≤ –∏–∑ Telegram
- `property_id` (number) - ID property –∫ –∫–æ—Ç–æ—Ä–æ–º—É –ø—Ä–∏–≤—è–∑–∞—Ç—å —Ñ–æ—Ç–æ
- `landlord_telegram_id` (number) - ID landlord (–¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –ø–∞–ø–æ–∫)

**–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `compress` (boolean) - —Å–∂–∏–º–∞—Ç—å –ª–∏ —Ñ–æ—Ç–æ (default: true)
- `max_size_mb` (number) - –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ –≤ MB (default: 5)
- `max_photos` (number) - –º–∞–∫—Å–∏–º—É–º —Ñ–æ—Ç–æ –Ω–∞ property (default: 10)

**–ü—Ä–∏–º–µ—Ä:**
```json
{
  "telegram_file_ids": ["AgACAgIAAxkBAAIC...", "AgACAgIAAxkBAAID..."],
  "property_id": 456,
  "landlord_telegram_id": 123456789,
  "compress": true,
  "max_size_mb": 5,
  "max_photos": 10
}
```

### –ß–¢–û –ù–ê –í–´–•–û–î–ï

**–£—Å–ø–µ—à–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```json
{
  "status": "success",
  "property_id": 456,
  "photos_uploaded": 3,
  "storage_urls": [
    "https://mcmzdscpuoxwneuzsanu.supabase.co/storage/v1/object/public/properties/456/photo1.jpg",
    "https://mcmzdscpuoxwneuzsanu.supabase.co/storage/v1/object/public/properties/456/photo2.jpg",
    "https://mcmzdscpuoxwneuzsanu.supabase.co/storage/v1/object/public/properties/456/photo3.jpg"
  ],
  "message": "3 —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω—ã",
  "storage_size_mb": 2.5
}
```

**–ß–∞—Å—Ç–∏—á–Ω—ã–π —É—Å–ø–µ—Ö (–Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —Ñ–æ—Ç–æ –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª–∏—Å—å):**
```json
{
  "status": "partial",
  "photos_uploaded": 2,
  "photos_failed": 1,
  "storage_urls": ["url1.jpg", "url2.jpg"],
  "errors": ["Photo 3: File too large (8.5MB > 5MB)"],
  "message": "2 –∏–∑ 3 —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π –∑–∞–≥—Ä—É–∂–µ–Ω—ã"
}
```

**–û—à–∏–±–∫–∞:**
```json
{
  "status": "error",
  "error": "telegram_api_error",
  "message": "–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å —Ñ–∞–π–ª—ã –∏–∑ Telegram",
  "details": "Invalid file_id"
}
```

---

## üîÑ –ß–¢–û –°–ò–°–¢–ï–ú–ê –î–ï–õ–ê–ï–¢

### –®–∞–≥ 1: –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
```javascript
// –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
if (!telegram_file_ids || telegram_file_ids.length === 0) {
  throw new Error('No photo IDs provided');
}

if (telegram_file_ids.length > max_photos) {
  throw new Error(`Too many photos: ${telegram_file_ids.length} > ${max_photos}`);
}

if (!property_id) {
  throw new Error('Property ID required');
}
```

### –®–∞–≥ 2: –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ –∏–∑ Telegram
```javascript
const downloadedPhotos = [];

for (let i = 0; i < telegram_file_ids.length; i++) {
  const fileId = telegram_file_ids[i];
  
  try {
    // –ü–æ–ª—É—á–∏—Ç—å info –æ —Ñ–∞–π–ª–µ
    const file = await bot.getFile(fileId);
    
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞
    const fileSizeMB = file.file_size / 1024 / 1024;
    if (fileSizeMB > max_size_mb) {
      errors.push(`Photo ${i+1}: File too large (${fileSizeMB.toFixed(1)}MB > ${max_size_mb}MB)`);
      continue;
    }
    
    // –°–∫–∞—á–∞—Ç—å —Ñ–∞–π–ª
    const fileUrl = `https://api.telegram.org/file/bot${BOT_TOKEN}/${file.file_path}`;
    const response = await fetch(fileUrl);
    const buffer = await response.arrayBuffer();
    
    downloadedPhotos.push({
      index: i,
      buffer: Buffer.from(buffer),
      size: file.file_size,
      extension: file.file_path.split('.').pop()
    });
    
  } catch (err) {
    errors.push(`Photo ${i+1}: ${err.message}`);
  }
}
```

### –®–∞–≥ 3: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è/—Å–∂–∞—Ç–∏–µ —Ñ–æ—Ç–æ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
```javascript
if (compress) {
  for (const photo of downloadedPhotos) {
    try {
      // –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å sharp –¥–ª—è —Å–∂–∞—Ç–∏—è
      const compressed = await sharp(photo.buffer)
        .resize(1920, 1080, { fit: 'inside', withoutEnlargement: true })
        .jpeg({ quality: 85 })
        .toBuffer();
      
      photo.buffer = compressed;
      photo.size = compressed.length;
      photo.extension = 'jpg';
      
    } catch (err) {
      console.warn('Compression failed, using original:', err.message);
    }
  }
}
```

### –®–∞–≥ 4: –ó–∞–≥—Ä—É–∑–∫–∞ –≤ Supabase Storage
```javascript
const storageUrls = [];

for (const photo of downloadedPhotos) {
  const fileName = `photo_${Date.now()}_${photo.index}.${photo.extension}`;
  const filePath = `${property_id}/${fileName}`;
  
  try {
    const { data, error } = await supabase.storage
      .from('properties')
      .upload(filePath, photo.buffer, {
        contentType: `image/${photo.extension}`,
        cacheControl: '3600',
        upsert: false
      });
    
    if (error) throw error;
    
    // –ü–æ–ª—É—á–∏—Ç—å –ø—É–±–ª–∏—á–Ω—ã–π URL
    const { data: { publicUrl } } = supabase.storage
      .from('properties')
      .getPublicUrl(filePath);
    
    storageUrls.push(publicUrl);
    
  } catch (err) {
    errors.push(`Photo ${photo.index + 1}: Upload failed - ${err.message}`);
  }
}
```

### –®–∞–≥ 5: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ URLs –≤ –ë–î
```javascript
const { error: updateError } = await supabase
  .from('properties')
  .update({
    photos: storageUrls,
    photos_count: storageUrls.length,
    updated_at: new Date().toISOString()
  })
  .eq('id', property_id);

if (updateError) {
  throw new Error('Failed to update property photos in database');
}
```

### –®–∞–≥ 6: –í–æ–∑–≤—Ä–∞—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
```javascript
return {
  status: errors.length === 0 ? 'success' : 'partial',
  property_id: property_id,
  photos_uploaded: storageUrls.length,
  photos_failed: errors.length,
  storage_urls: storageUrls,
  errors: errors,
  message: `${storageUrls.length} –∏–∑ ${telegram_file_ids.length} —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π –∑–∞–≥—Ä—É–∂–µ–Ω—ã`,
  storage_size_mb: totalSizeMB
};
```

---

## üîß –í–ê–ñ–ù–´–ï –í–û–ü–†–û–°–´ (–¥–ª—è production)

### 1. –õ–∏–º–∏—Ç—ã —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π
**–ú–∞–∫—Å–∏–º—É–º —Å–∫–æ–ª—å–∫–æ —Ñ–æ—Ç–æ –Ω–∞ –æ–¥–∏–Ω property?**
- ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: **10 —Ñ–æ—Ç–æ**
- –ü—Ä–∏—á–∏–Ω–∞: –±–∞–ª–∞–Ω—Å –º–µ–∂–¥—É –∫–∞—á–µ—Å—Ç–≤–æ–º –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏ –∏ —Å–∫–æ—Ä–æ—Å—Ç—å—é –∑–∞–≥—Ä—É–∑–∫–∏
- –ú–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —á–µ—Ä–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä `max_photos`

### 2. –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–æ–≤
**–ú–∞–∫—Å–∏–º—É–º –∫–∞–∫–æ–π —Ä–∞–∑–º–µ—Ä –∑–∞ —Ñ–æ—Ç–æ?**
- ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: **5 MB** –æ—Ä–∏–≥–∏–Ω–∞–ª
- –ü–æ—Å–ª–µ —Å–∂–∞—Ç–∏—è: –æ–±—ã—á–Ω–æ 500KB - 1.5MB
- Telegram limit: 10MB (–Ω–æ –ª—É—á—à–µ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å –º–µ–Ω—å—à–µ)

### 3. –°–∂–∞—Ç–∏–µ —Ñ–æ—Ç–æ
**–ù—É–∂–Ω–æ –ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∂–∏–º–∞—Ç—å/—É–º–µ–Ω—å—à–∞—Ç—å —Ä–∞–∑–º–µ—Ä —Ñ–æ—Ç–æ?**
- ‚úÖ **–î–ê** - –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Å–∂–∏–º–∞—Ç—å:
  - Resize –¥–æ max 1920x1080 (Full HD)
  - JPEG quality 85%
  - –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è HEIC/PNG ‚Üí JPEG
- –≠–∫–æ–Ω–æ–º–∏—è: –¥–æ 70-80% —Ä–∞–∑–º–µ—Ä–∞ –±–µ–∑ –ø–æ—Ç–µ—Ä–∏ –∫–∞—á–µ—Å—Ç–≤–∞

### 4. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
**–ï—Å–ª–∏ —Ñ–æ—Ç–æ –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª–∞—Å—å ‚Üí —á—Ç–æ –¥–µ–ª–∞–µ–º?**
- **–í–∞—Ä–∏–∞–Ω—Ç –ê:** –°–æ—Ö—Ä–∞–Ω–∏—Ç—å property —Å —Ç–µ–º–∏ —Ñ–æ—Ç–æ —á—Ç–æ –∑–∞–≥—Ä—É–∑–∏–ª–∏—Å—å ‚úÖ
- **–í–∞—Ä–∏–∞–Ω—Ç –ë:** –û—Ç–º–µ–Ω–∏—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ property ‚ùå
- **–í–∞—Ä–∏–∞–Ω—Ç –í:** –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–∞–∫ —á–µ—Ä–Ω–æ–≤–∏–∫ –∏ –∑–∞–ø—Ä–æ—Å–∏—Ç—å —Ñ–æ—Ç–æ —Å–Ω–æ–≤–∞
- **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –í–∞—Ä–∏–∞–Ω—Ç –ê + —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ landlord

### 5. –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–æ–∫ –≤ Storage:**
```
properties/
  ‚îú‚îÄ‚îÄ 123/               # property_id
  ‚îÇ   ‚îú‚îÄ‚îÄ photo_1.jpg
  ‚îÇ   ‚îú‚îÄ‚îÄ photo_2.jpg
  ‚îÇ   ‚îî‚îÄ‚îÄ photo_3.jpg
  ‚îú‚îÄ‚îÄ 456/
  ‚îÇ   ‚îî‚îÄ‚îÄ photo_1.jpg
  ‚îî‚îÄ‚îÄ ...
```

### 6. –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ
- Supabase Storage –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–µ–ª–∞–µ—Ç backups
- CDN –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ –≤—Å–µ–º—É –º–∏—Ä—É
- –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ: –µ—Å–ª–∏ landlord –∑–∞–º–µ–Ω–∏—Ç —Ñ–æ—Ç–æ

---

## üìù Instructions for AI Agent:

### Step 1: Validate Input
```javascript
if (!telegram_file_ids?.length) throw new Error('No photos provided');
if (telegram_file_ids.length > max_photos) throw new Error('Too many photos');
if (!property_id) throw new Error('Property ID required');
```

### Step 2: Download from Telegram
```javascript
const photos = [];
for (const fileId of telegram_file_ids) {
  const file = await bot.getFile(fileId);
  const url = `https://api.telegram.org/file/bot${TOKEN}/${file.file_path}`;
  const response = await fetch(url);
  const buffer = await response.arrayBuffer();
  photos.push({ buffer, fileId });
}
```

### Step 3: Compress Images
```javascript
const compressed = await sharp(buffer)
  .resize(1920, 1080, { fit: 'inside' })
  .jpeg({ quality: 85 })
  .toBuffer();
```

### Step 4: Upload to Supabase
```javascript
const { data } = await supabase.storage
  .from('properties')
  .upload(`${property_id}/photo_${i}.jpg`, buffer);
```

### Step 5: Get Public URLs
```javascript
const { data: { publicUrl } } = supabase.storage
  .from('properties')
  .getPublicUrl(filePath);
```

### Step 6: Update Database
```javascript
await supabase
  .from('properties')
  .update({ photos: urls })
  .eq('id', property_id);
```

---

## üß™ Expected Output:

**Success:**
```json
{
  "status": "success",
  "property_id": 456,
  "photos_uploaded": 3,
  "storage_urls": [
    "https://supabase.co/.../properties/456/photo1.jpg",
    "https://supabase.co/.../properties/456/photo2.jpg",
    "https://supabase.co/.../properties/456/photo3.jpg"
  ],
  "message": "3 —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω—ã",
  "storage_size_mb": 2.1,
  "compression_ratio": "65%"
}
```

---

## üí° Example Usage:

### Via API (–∏–∑ SKILL #2):
```javascript
// –í skill #2, –ø–æ—Å–ª–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Ñ–æ—Ä–º—ã
const photoResult = await fetch('/api/admin/skills/store-property-photos/run', {
  method: 'POST',
  body: JSON.stringify({
    telegram_file_ids: formData.photos,
    property_id: newProperty.id,
    landlord_telegram_id: formData.landlord_telegram_id
  })
});

const { storage_urls } = await photoResult.json();

// –û–±–Ω–æ–≤–∏—Ç—å property —Å URLs
await updateProperty(newProperty.id, { photos: storage_urls });
```

### Via Command Line:
```bash
node .agent/skills/store-property-photos/scripts/store.js \
  --file-ids="id1,id2,id3" \
  --property-id=456 \
  --compress=true
```

---

## üì¶ Dependencies:

```json
{
  "node-telegram-bot-api": "^0.66.0",
  "@supabase/supabase-js": "^2.39.0",
  "sharp": "^0.33.0",
  "node-fetch": "^3.3.2"
}
```

---

## üîê Environment Variables:

```env
TELEGRAM_BOT_TOKEN=1234567890:ABCdefGHIjklMNOpqrsTUVwxyz
SUPABASE_URL=https://xxx.supabase.co
SUPABASE_KEY=xxx
SUPABASE_STORAGE_BUCKET=properties
MAX_PHOTO_SIZE_MB=5
MAX_PHOTOS_PER_PROPERTY=10
COMPRESS_PHOTOS=true
```

---

## ‚ö†Ô∏è Notes:

- **–¢–µ—Å—Ç–æ–≤–∞—è –≤–µ—Ä—Å–∏—è:** Mock –∑–∞–≥—Ä—É–∑–∫–∞ –±–µ–∑ —Ä–µ–∞–ª—å–Ω–æ–≥–æ Telegram
- **–°–∂–∞—Ç–∏–µ:** Sharp library –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- **–§–æ—Ä–º–∞—Ç:** –í—Å–µ —Ñ–æ—Ç–æ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –≤ JPEG
- **–†–∞–∑–º–µ—Ä:** Resize –¥–æ 1920x1080, quality 85%
- **Async:** –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –¥–ª—è —Å–∫–æ—Ä–æ—Å—Ç–∏
- **Retry:** 3 –ø–æ–ø—ã—Ç–∫–∏ –ø—Ä–∏ –æ—à–∏–±–∫–µ –∑–∞–≥—Ä—É–∑–∫–∏

---

## üöÄ Future Enhancements:

1. **WebP —Ñ–æ—Ä–º–∞—Ç** - –µ—â—ë –º–µ–Ω—å—à–µ —Ä–∞–∑–º–µ—Ä (-30% vs JPEG)
2. **Lazy loading thumbnails** - —Å–æ–∑–¥–∞–≤–∞—Ç—å preview 400x300
3. **–í–æ–¥—è–Ω—ã–µ –∑–Ω–∞–∫–∏** - –¥–æ–±–∞–≤–ª—è—Ç—å watermark –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
4. **EXIF –æ—á–∏—Å—Ç–∫–∞** - —É–¥–∞–ª—è—Ç—å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ (–≥–µ–æ–ª–æ–∫–∞—Ü–∏—è, –∫–∞–º–µ—Ä–∞)
5. **AI –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è** - —É–º–Ω–æ–µ –∫–∞–¥—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ, —É–ª—É—á—à–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞
6. **CDN –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** - CloudFlare –¥–ª—è –µ—â—ë –±–æ–ª–µ–µ –±—ã—Å—Ç—Ä–æ–π –∑–∞–≥—Ä—É–∑–∫–∏
