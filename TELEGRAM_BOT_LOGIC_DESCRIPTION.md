# –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã Telegram –±–æ—Ç–∞

**–î–∞—Ç–∞:** 29 —è–Ω–≤–∞—Ä—è 2026  
**–°—Ç–∞—Ç—É—Å:** –ê–∫—Ç—É–∞–ª—å–Ω–æ  
**–ë–æ—Ç:** Property Saver Bot –¥–ª—è –∞—Ä–µ–Ω–¥–∞—Ç–æ—Ä–æ–≤

---

## –û–±—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ì–ª–∞–≤–Ω—ã–π endpoint: `/api/telegram-webhook`

**–í—Ö–æ–¥–Ω–∞—è —Ç–æ—á–∫–∞:** Telegram –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤—Å–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –Ω–∞ —ç—Ç–æ—Ç webhook

**–¢–∏–ø—ã –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π:**
1. `update.message` - –û–±—ã—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
2. `update.callback_query` - –ù–∞–∂–∞—Ç–∏—è –Ω–∞ inline –∫–Ω–æ–ø–∫–∏

---

## –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π

### –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π

```
üì® Webhook –ø–æ–ª—É—á–∞–µ—Ç update
    ‚Üì
üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–∞ update
    ‚Üì
üì± –ï—Å–ª–∏ message ‚Üí handleMessage()
üîò –ï—Å–ª–∏ callback_query ‚Üí handleCallbackQuery()
```

### –§—É–Ω–∫—Ü–∏—è `handleMessage()`

**–®–∞–≥ 1: –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ —Å–æ–æ–±—â–µ–Ω–∏—è**

```typescript
if (message.text?.startsWith('/')) {
  // –≠—Ç–æ –∫–æ–º–∞–Ω–¥–∞ ‚Üí handleCommand()
}
```

**–®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ**

–û–ø—Ä–µ–¥–µ–ª—è–µ–º —á—Ç–æ –µ—Å—Ç—å –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏:
- ‚úÖ `hasPhotos` - –µ—Å—Ç—å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏
- ‚úÖ `hasLocation` - –µ—Å—Ç—å –≥–µ–æ–ª–æ–∫–∞—Ü–∏—è
- ‚úÖ `hasText` - –µ—Å—Ç—å —Ç–µ–∫—Å—Ç –∏–ª–∏ caption
- ‚úÖ `hasGoogleMapsUrl` - –≤ —Ç–µ–∫—Å—Ç–µ –µ—Å—Ç—å Google Maps —Å—Å—ã–ª–∫–∞

**–®–∞–≥ 3: –í—ã–±–æ—Ä —Ä–µ–∂–∏–º–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏**

```
–ï—Å–ª–∏ (hasPhotos –ò–õ–ò hasLocation –ò–õ–ò hasGoogleMapsUrl) –ò hasText:
  ‚Üí –†–ï–ñ–ò–ú 1: –ü–æ–ª–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ (handleCompleteMessage)
  
–ò–Ω–∞—á–µ:
  ‚Üí –†–ï–ñ–ò–ú 2: –ü–æ—à–∞–≥–æ–≤—ã–π –≤–≤–æ–¥ (handleStepByStepInput)
```

---

## –†–ï–ñ–ò–ú 1: –ü–æ–ª–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ (Forward)

**–ò–¥–µ–∞–ª—å–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ—Å—ã–ª–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –∏–∑ –∫–∞–Ω–∞–ª–∞/—á–∞—Ç–∞ —Å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ–º

### –ü—Ä–æ—Ü–µ—Å—Å –æ–±—Ä–∞–±–æ—Ç–∫–∏ (9 —à–∞–≥–æ–≤):

#### 1. –ü–æ–ª—É—á–µ–Ω–∏–µ/—Å–æ–∑–¥–∞–Ω–∏–µ tenant
```typescript
const tenant = await getOrCreateTenant(userId);
```
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –ë–î
- –ï—Å–ª–∏ –Ω–µ—Ç - —Å–æ–∑–¥–∞—ë—Ç –∑–∞–ø–∏—Å—å —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º —Ç–æ–∫–µ–Ω–æ–º –∫–∞—Ä—Ç—ã
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç tenant —Å `personal_map_url`

#### 2. –ü–∞—Ä—Å–∏–Ω–≥ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö forward
```typescript
const forwardMeta = parseForwardMetadata(message);
```
**–ò–∑–≤–ª–µ–∫–∞–µ—Ç:**
- `source_type` - –æ—Ç–∫—É–¥–∞ –ø–µ—Ä–µ—Å–ª–∞–Ω–æ (channel/user/chat)
- `forward_from_user_id` - ID –∏—Å—Ç–æ—á–Ω–∏–∫–∞
- `forward_from_username` - username –∏—Å—Ç–æ—á–Ω–∏–∫–∞
- `forward_from_chat_title` - –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–∞–Ω–∞–ª–∞/—á–∞—Ç–∞
- `forward_date` - –¥–∞—Ç–∞ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è

#### 3. –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –∏ Google Maps URL
```typescript
const text = message.caption || message.text || '';
const googleMapsUrl = extractGoogleMapsUrl(text);
```

#### 4. AI –∞–Ω–∞–ª–∏–∑ —Ç–µ–∫—Å—Ç–∞
```typescript
const aiResult = await analyzeWithFallback(text, googleMapsUrl);
```

**–°—Ç—Ä–∞—Ç–µ–≥–∏—è —Å fallback:**
```
1. –ü–æ–ø—ã—Ç–∫–∞: Groq AI (–±—ã—Å—Ç—Ä–æ, –¥—ë—à–µ–≤–æ)
   ‚Üì (–µ—Å–ª–∏ –æ—à–∏–±–∫–∞)
2. –ü–æ–ø—ã—Ç–∫–∞: Perplexity AI (–º–µ–¥–ª–µ–Ω–Ω–µ–µ, –Ω–æ –Ω–∞–¥—ë–∂–Ω–µ–µ)
   ‚Üì (–µ—Å–ª–∏ –æ—à–∏–±–∫–∞)
3. Fallback: Manual parser (—Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è)
```

**AI –∏–∑–≤–ª–µ–∫–∞–µ—Ç:**
- `title` - –Ω–∞–∑–≤–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞
- `description` - –æ–ø–∏—Å–∞–Ω–∏–µ
- `property_type` - —Ç–∏–ø (apartment/house/room/etc)
- `bedrooms` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–ø–∞–ª–µ–Ω
- `bathrooms` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–∞–Ω–Ω—ã—Ö
- `price` - —Ü–µ–Ω–∞
- `currency` - –≤–∞–ª—é—Ç–∞
- `coordinates` - —à–∏—Ä–æ—Ç–∞ –∏ –¥–æ–ª–≥–æ—Ç–∞ (–µ—Å–ª–∏ –µ—Å—Ç—å)
- `address` - –∞–¥—Ä–µ—Å
- `amenities` - —É–¥–æ–±—Å—Ç–≤–∞
- `contact_info` - –∫–æ–Ω—Ç–∞–∫—Ç—ã

#### 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤
```typescript
if (aiResult.coordinates) {
  const duplicate = await checkDuplicate(userId, lat, lng, price);
}
```

**–õ–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏:**
- –ò—â–µ—Ç –æ–±—ä–µ–∫—Ç—ã –≤ —Ä–∞–¥–∏—É—Å–µ ¬±0.001¬∞ (~100 –º–µ—Ç—Ä–æ–≤)
- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç —Ü–µ–Ω—É
- –ï—Å–ª–∏ –Ω–∞–π–¥–µ–Ω ‚Üí —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á—Ç–æ –¥–µ–ª–∞—Ç—å

#### 6. –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π
```typescript
if (message.photo) {
  const bestPhoto = getBestQualityPhoto(message.photo);
  photoUrls = await uploadTelegramPhotos(...);
}
```

**–ü—Ä–æ—Ü–µ—Å—Å:**
- –í—ã–±–∏—Ä–∞–µ—Ç —Ñ–æ—Ç–æ –ª—É—á—à–µ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞
- –°–∫–∞—á–∏–≤–∞–µ—Ç —á–µ—Ä–µ–∑ Telegram Bot API
- –ó–∞–≥—Ä—É–∂–∞–µ—Ç –≤ Supabase Storage
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—É–±–ª–∏—á–Ω—ã–µ URLs

#### 7. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö
```typescript
const propertyData = {
  ...formatForDatabase(aiResult),
  telegram_user_id: userId,
  photos: photoUrls,
  google_maps_url: googleMapsUrl,
  ...forwardMeta
};
```

#### 8. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î
```typescript
const property = await saveProperty(propertyData);
```

**–¢–∞–±–ª–∏—Ü–∞:** `saved_properties`

#### 9. –û—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç–≤–µ—Ç–∞
```typescript
await sendTelegramMessage({
  text: successMessage,
  replyMarkup: {
    inline_keyboard: [
      [
        { text: 'üó∫Ô∏è –û—Ç–∫—Ä—ã—Ç—å –∫–∞—Ä—Ç—É', url: tenant.personal_map_url },
        { text: '‚≠ê –í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ', callback_data: `favorite_${property.id}` }
      ],
      [
        { text: '‚úèÔ∏è –î–æ–±–∞–≤–∏—Ç—å –∑–∞–º–µ—Ç–∫—É', callback_data: `add_note_${property.id}` },
        { text: 'üóëÔ∏è –£–¥–∞–ª–∏—Ç—å', callback_data: `delete_${property.id}` }
      ]
    ]
  }
});
```

---

## –†–ï–ñ–ò–ú 2: –ü–æ—à–∞–≥–æ–≤—ã–π –≤–≤–æ–¥

**–°—Ü–µ–Ω–∞—Ä–∏–π:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ —á–∞—Å—Ç—è–º

### State Machine

–ö–∞–∂–¥—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–º–µ–µ—Ç —Å–µ—Å—Å–∏—é:
```typescript
interface UserSession {
  userId: number;
  state: 'idle' | 'awaiting_location' | 'awaiting_photos' | 'awaiting_description';
  tempData: {
    photos?: string[];
    photoFileIds?: string[];
    latitude?: number;
    longitude?: number;
    description?: string;
    googleMapsUrl?: string;
  };
  lastActivity: Date;
}
```

### –î–∏–∞–≥—Ä–∞–º–º–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π

```
[idle]
  ‚Üì (–ø–æ–ª—É—á–µ–Ω–æ —Ñ–æ—Ç–æ)
[awaiting_location] ‚Üí "–û—Ç–ø—Ä–∞–≤—å –ª–æ–∫–∞—Ü–∏—é"
  ‚Üì (–ø–æ–ª—É—á–µ–Ω–∞ –ª–æ–∫–∞—Ü–∏—è)
[awaiting_description] ‚Üí "–î–æ–±–∞–≤—å –æ–ø–∏—Å–∞–Ω–∏–µ"
  ‚Üì (–Ω–∞–∂–∞—Ç–∞ –∫–Ω–æ–ø–∫–∞ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å")
[–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î]

–ò–õ–ò

[idle]
  ‚Üì (–ø–æ–ª—É—á–µ–Ω–∞ –ª–æ–∫–∞—Ü–∏—è)
[awaiting_photos] ‚Üí "–û—Ç–ø—Ä–∞–≤—å —Ñ–æ—Ç–æ"
  ‚Üì (–ø–æ–ª—É—á–µ–Ω–æ —Ñ–æ—Ç–æ)
[–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î]
```

### –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π

#### State: `idle`

**–ü–æ–ª—É—á–µ–Ω–æ —Ñ–æ—Ç–æ:**
```
1. –°–æ—Ö—Ä–∞–Ω—è–µ–º file_id —Ñ–æ—Ç–æ
2. state = 'awaiting_location'
3. –û—Ç–ø—Ä–∞–≤–ª—è–µ–º: "üì∏ –§–æ—Ç–æ –ø–æ–ª—É—á–µ–Ω—ã! –¢–µ–ø–µ—Ä—å –æ—Ç–ø—Ä–∞–≤—å –ª–æ–∫–∞—Ü–∏—é"
4. –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫–∏:
   - "üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –±–µ–∑ –∞–¥—Ä–µ—Å–∞"
   - "‚ùå –û—Ç–º–µ–Ω–∞"
```

**–ü–æ–ª—É—á–µ–Ω–∞ –ª–æ–∫–∞—Ü–∏—è:**
```
1. –°–æ—Ö—Ä–∞–Ω—è–µ–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã
2. state = 'awaiting_photos'
3. –û—Ç–ø—Ä–∞–≤–ª—è–µ–º: "üìç –ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ –ø–æ–ª—É—á–µ–Ω–æ! –¢–µ–ø–µ—Ä—å –æ—Ç–ø—Ä–∞–≤—å —Ñ–æ—Ç–æ"
4. –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É: "üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –±–µ–∑ —Ñ–æ—Ç–æ"
```

**–ü–æ–ª—É—á–µ–Ω —Ç–µ–∫—Å—Ç —Å Google Maps URL:**
```
1. –°–æ—Ö—Ä–∞–Ω—è–µ–º URL –∏ —Ç–µ–∫—Å—Ç
2. state = 'awaiting_photos'
3. –û—Ç–ø—Ä–∞–≤–ª—è–µ–º: "üîó Google Maps —Å—Å—ã–ª–∫–∞ –ø–æ–ª—É—á–µ–Ω–∞!"
```

**–ü–æ–ª—É—á–µ–Ω –æ–±—ã—á–Ω—ã–π —Ç–µ–∫—Å—Ç:**
```
1. –°–æ—Ö—Ä–∞–Ω—è–µ–º –∫–∞–∫ description
2. state = 'awaiting_location'
3. –û—Ç–ø—Ä–∞–≤–ª—è–µ–º: "üí¨ –û–ø–∏—Å–∞–Ω–∏–µ –ø–æ–ª—É—á–µ–Ω–æ! –¢–µ–ø–µ—Ä—å –æ—Ç–ø—Ä–∞–≤—å –ª–æ–∫–∞—Ü–∏—é"
```

#### State: `awaiting_location`

**–ü–æ–ª—É—á–µ–Ω–∞ –ª–æ–∫–∞—Ü–∏—è:**
```
1. –°–æ—Ö—Ä–∞–Ω—è–µ–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã
2. state = 'awaiting_description'
3. –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É: "üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–µ–π—á–∞—Å"
```

**–ü–æ–ª—É—á–µ–Ω —Ç–µ–∫—Å—Ç —Å Google Maps URL:**
```
1. –ò–∑–≤–ª–µ–∫–∞–µ–º URL
2. –î–æ–±–∞–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç –∫ description
3. state = 'awaiting_description'
4. –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É: "üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–µ–π—á–∞—Å"
```

#### State: `awaiting_photos`

**–ü–æ–ª—É—á–µ–Ω–æ —Ñ–æ—Ç–æ:**
```
1. –î–æ–±–∞–≤–ª—è–µ–º file_id –∫ –º–∞—Å—Å–∏–≤—É
2. –û—Ç–ø—Ä–∞–≤–ª—è–µ–º: "üì∏ –§–æ—Ç–æ –ø–æ–ª—É—á–µ–Ω–æ! (N —à—Ç.)"
3. –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É: "üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å"
```

#### State: `awaiting_description`

**–ü–æ–ª—É—á–µ–Ω —Ç–µ–∫—Å—Ç:**
```
1. –°–æ—Ö—Ä–∞–Ω—è–µ–º description
2. –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É: "üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ–±—ä–µ–∫—Ç"
```

---

## –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥

### `/start`
```typescript
1. –ü–æ–ª—É—á–∞–µ–º/—Å–æ–∑–¥–∞—ë–º tenant
2. –§–æ—Ä–º–∏—Ä—É–µ–º –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
3. –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å –∫–Ω–æ–ø–∫–∞–º–∏:
   - "üó∫Ô∏è –ú–æ—è –∫–∞—Ä—Ç–∞" (web_app button)
   - "‚ùì –ü–æ–º–æ—â—å" (callback)
```

### `/help`
```typescript
–û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
```

### `/stats`
```typescript
TODO: –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤
- –ò–∑–±—Ä–∞–Ω–Ω—ã–µ
- –ü–æ—Å–ª–µ–¥–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
```

---

## –û–±—Ä–∞–±–æ—Ç–∫–∞ Callback Query (–∫–Ω–æ–ø–∫–∏)

### –ü—Ä–æ—Ü–µ—Å—Å
```
1. –ü–æ–ª—É—á–∞–µ–º callback_query
2. –û—Ç–≤–µ—á–∞–µ–º answerCallbackQuery (—É–±–∏—Ä–∞–µ—Ç "—á–∞—Å–∏–∫–∏")
3. –ü–∞—Ä—Å–∏–º callback_data
4. –í—ã–ø–æ–ª–Ω—è–µ–º –¥–µ–π—Å—Ç–≤–∏–µ
```

### –¢–∏–ø—ã callback

#### `cancel`
```typescript
- –£–¥–∞–ª—è–µ–º —Å–µ—Å—Å–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –û—Ç–ø—Ä–∞–≤–ª—è–µ–º: "‚ùå –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ—Ç–º–µ–Ω–µ–Ω–æ"
```

#### `save_complete`
```typescript
- –í—ã–∑—ã–≤–∞–µ–º saveFromSession()
- –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ —Å–µ—Å—Å–∏–∏ –≤ –ë–î
- –û—á–∏—â–∞–µ–º —Å–µ—Å—Å–∏—é
```

#### `favorite_{property_id}`
```typescript
TODO: Toggle favorite status
- –û–±–Ω–æ–≤–∏—Ç—å is_favorite –≤ –ë–î
- –û—Ç–ø—Ä–∞–≤–∏—Ç—å: "‚≠ê –î–æ–±–∞–≤–ª–µ–Ω–æ –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ"
```

#### `delete_{property_id}`
```typescript
- –ü–æ–∫–∞–∑–∞—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ:
  "‚ö†Ô∏è –ü–æ–¥—Ç–≤–µ—Ä–¥–∏ —É–¥–∞–ª–µ–Ω–∏–µ"
  –ö–Ω–æ–ø–∫–∏:
    - "‚úÖ –î–∞, —É–¥–∞–ª–∏—Ç—å"
    - "‚ùå –û—Ç–º–µ–Ω–∞"
```

#### `add_note_{property_id}`
```typescript
TODO: Add note to property
- –ü–µ—Ä–µ–≤–µ—Å—Ç–∏ –≤ state –¥–ª—è –≤–≤–æ–¥–∞ –∑–∞–º–µ—Ç–∫–∏
- –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∑–∞–º–µ—Ç–∫—É
```

---

–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º –æ–ø–∏—Å–∞–Ω–∏–µ–º AI –∞–Ω–∞–ª–∏–∑–∞ –∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö?