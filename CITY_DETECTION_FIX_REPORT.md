# üó∫Ô∏è –û—Ç—á–µ—Ç –ø–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –≥–æ—Ä–æ–¥–∞

**–î–∞—Ç–∞:** 26 —Ñ–µ–≤—Ä–∞–ª—è 2026  
**–ü—Ä–æ–±–ª–µ–º–∞:** –û–±—ä–µ–∫—Ç—ã –ø–æ–ø–∞–¥–∞—é—Ç –≤ Colombo –≤–º–µ—Å—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –≥–æ—Ä–æ–¥–∞  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û**

---

## üéØ –ü—Ä–æ–±–ª–µ–º–∞

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ–±–Ω–∞—Ä—É–∂–∏–ª, —á—Ç–æ –æ–±—ä–µ–∫—Ç —Å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏ `6.0490797, 80.2882965` (Billy Breeze Apartment, Unawatuna) –±—ã–ª —Ä–∞–∑–º–µ—â–µ–Ω –≤ **Colombo** –≤–º–µ—Å—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –≥–æ—Ä–æ–¥–∞.

**–ü—Ä–∏–º–µ—Ä:**
- –ö–æ—Ä–æ—Ç–∫–∞—è —Å—Å—ã–ª–∫–∞: `https://maps.app.goo.gl/3k4khwBzm2tPtZKN6`
- –†–∞–∑–≤–µ—Ä–Ω—É—Ç–∞—è —Å—Å—ã–ª–∫–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç: `@6.0490797,80.2882965`
- **–û–∂–∏–¥–∞–ª–æ—Å—å:** Unawatuna –∏–ª–∏ Galle (~6 –∫–º –æ—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç)
- **–ü–æ–ª—É—á–µ–Ω–æ:** Colombo (108 –∫–º –æ—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç!) ‚ùå

---

## üîç –ö–æ—Ä–Ω–µ–≤–∞—è –ø—Ä–∏—á–∏–Ω–∞

### –ü—Ä–æ–±–ª–µ–º–∞ –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `getCityFromCoordinates()`

**–§–∞–π–ª:** `src/lib/telegram-bot-ai.ts`

**–°—Ç–∞—Ä–∞—è –ª–æ–≥–∏–∫–∞:**
```typescript
let closestCity = 'Colombo'; // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é
let minDistance = Infinity;

for (const city of cities) {
  const distance = Math.sqrt(
    Math.pow(lat - city.lat, 2) + Math.pow(lng - city.lng, 2)
  );
  
  // –ü–†–û–ë–õ–ï–ú–ê: –ò distance < minDistance, –ò distance < city.radius
  if (distance < minDistance && distance < city.radius) {
    minDistance = distance;
    closestCity = city.name;
  }
}
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–æ:**

1. –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã `6.0490797, 80.2882965`
2. –ë–ª–∏–∂–∞–π—à–∏–π –≥–æ—Ä–æ–¥: **Unawatuna** (—Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ ~0.054 –≥—Ä–∞–¥—É—Å–∞ = 6 –∫–º)
3. –†–∞–¥–∏—É—Å Unawatuna: `0.05` –≥—Ä–∞–¥—É—Å–∞ (~5.5 –∫–º)
4. `6 –∫–º > 5.5 –∫–º` ‚Üí **–ù–ï –ø–æ–ø–∞–¥–∞–µ—Ç –≤ —Ä–∞–¥–∏—É—Å** ‚ùå
5. –¶–∏–∫–ª –Ω–µ –Ω–∞—Ö–æ–¥–∏—Ç –Ω–∏ –æ–¥–∏–Ω –≥–æ—Ä–æ–¥ –≤ —Ä–∞–¥–∏—É—Å–µ
6. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è **–¥–µ—Ñ–æ–ª—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ: Colombo** ‚ùå

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ 1: –£–≤–µ–ª–∏—á–µ–Ω—ã —Ä–∞–¥–∏—É—Å—ã –≥–æ—Ä–æ–¥–æ–≤

**–î–æ:**
```typescript
{ name: 'Unawatuna', lat: 6.0097, lng: 80.2474, radius: 0.05 },  // 5.5 –∫–º
{ name: 'Galle', lat: 6.0535, lng: 80.2210, radius: 0.1 },       // 11 –∫–º
{ name: 'Hikkaduwa', lat: 6.1408, lng: 80.1033, radius: 0.08 },  // 8.8 –∫–º
{ name: 'Mirissa', lat: 5.9467, lng: 80.4539, radius: 0.05 },    // 5.5 –∫–º
```

**–ü–æ—Å–ª–µ:**
```typescript
{ name: 'Unawatuna', lat: 6.0097, lng: 80.2474, radius: 0.1 },   // 11 –∫–º ‚úÖ
{ name: 'Galle', lat: 6.0535, lng: 80.2210, radius: 0.15 },      // 16.5 –∫–º ‚úÖ
{ name: 'Hikkaduwa', lat: 6.1408, lng: 80.1033, radius: 0.12 },  // 13.2 –∫–º ‚úÖ
{ name: 'Mirissa', lat: 5.9467, lng: 80.4539, radius: 0.08 },    // 8.8 –∫–º ‚úÖ
```

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ 2: –ò–∑–º–µ–Ω–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –≥–æ—Ä–æ–¥–∞

**–ù–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ (–¥–≤—É—Ö—ç—Ç–∞–ø–Ω–∞—è):**

```typescript
// –≠—Ç–∞–ø 1: –ò—â–µ–º –≥–æ—Ä–æ–¥ –í –ü–†–ï–î–ï–õ–ê–• —Ä–∞–¥–∏—É—Å–∞
let closestCityInRadius = null;
let minDistanceInRadius = Infinity;

for (const city of cities) {
  const distance = Math.sqrt(
    Math.pow(lat - city.lat, 2) + Math.pow(lng - city.lng, 2)
  );
  
  if (distance < city.radius && distance < minDistanceInRadius) {
    minDistanceInRadius = distance;
    closestCityInRadius = city.name;
  }
}

// –ï—Å–ª–∏ –Ω–∞—à–ª–∏ - –≤–æ–∑–≤—Ä–∞—â–∞–µ–º
if (closestCityInRadius) {
  return closestCityInRadius; // ‚úÖ
}

// –≠—Ç–∞–ø 2: –ï—Å–ª–∏ –ù–ï –Ω–∞—à–ª–∏ –≤ —Ä–∞–¥–∏—É—Å–µ - –∏—â–µ–º –ü–†–û–°–¢–û –±–ª–∏–∂–∞–π—à–∏–π –≥–æ—Ä–æ–¥
let closestCity = 'Colombo'; // Fallback
let minDistance = Infinity;

for (const city of cities) {
  const distance = Math.sqrt(
    Math.pow(lat - city.lat, 2) + Math.pow(lng - city.lng, 2)
  );
  
  if (distance < minDistance) { // –ë–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–¥–∏—É—Å–∞!
    minDistance = distance;
    closestCity = city.name;
  }
}

return closestCity;
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–π –ª–æ–≥–∏–∫–∏:**

1. ‚úÖ –°–Ω–∞—á–∞–ª–∞ –∏—â–µ–º –≥–æ—Ä–æ–¥ –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö —Ä–∞–¥–∏—É—Å–∞ (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)
2. ‚úÖ –ï—Å–ª–∏ –Ω–µ –Ω–∞—à–ª–∏ - –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –±–ª–∏–∂–∞–π—à–∏–π –≥–æ—Ä–æ–¥ (–∞ –Ω–µ Colombo!)
3. ‚úÖ Colombo –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫–∞–∫ fallback, –µ—Å–ª–∏ –≤—Å–µ –≥–æ—Ä–æ–¥–∞ –¥–∞–ª–µ–∫–æ

---

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –¢–µ—Å—Ç 1: Billy Breeze Apartment

**–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã:** `6.0490797, 80.2882965`

**–î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- ‚ùå –ì–æ—Ä–æ–¥: **Colombo** (–¥–µ—Ñ–æ–ª—Ç)
- ‚ùå –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ: 108 –∫–º

**–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- ‚úÖ –ì–æ—Ä–æ–¥: **Unawatuna** (within radius)
- ‚úÖ –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ: 6.3 –∫–º
- ‚úÖ –ü–æ–ø–∞–¥–∞–µ—Ç –≤ —Ä–∞–¥–∏—É—Å 11 –∫–º

### –¢–µ—Å—Ç 2: Russian Guesthouse Mirissa

**–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã:** `5.947613, 80.462578`

**–î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- ‚ö†Ô∏è –ú–æ–≥–ª–æ –±—ã—Ç—å: Colombo (–µ—Å–ª–∏ –Ω–µ –ø–æ–ø–∞–ª–æ –≤ —Ä–∞–¥–∏—É—Å)

**–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- ‚úÖ –ì–æ—Ä–æ–¥: **Mirissa** (within radius)
- ‚úÖ –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ: 1.0 –∫–º
- ‚úÖ –ò–¥–µ–∞–ª—å–Ω–æ!

### –¢–µ—Å—Ç 3: Colombo Center

**–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã:** `6.9271, 79.8612`

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ì–æ—Ä–æ–¥: **Colombo** (within radius)
- ‚úÖ –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ: 0.0 –∫–º
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç Colombo, –∫–æ–≥–¥–∞ —ç—Ç–æ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ Colombo

---

## üõ†Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–π —Ñ–∞–π–ª

**–§–∞–π–ª:** `src/lib/telegram-bot-ai.ts`  
**–§—É–Ω–∫—Ü–∏—è:** `getCityFromCoordinates(lat: number, lng: number): string`

### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Ä–∞–¥–∏—É—Å–∞—Ö

| –ì–æ—Ä–æ–¥ | –ë—ã–ª–æ (–∫–º) | –°—Ç–∞–ª–æ (–∫–º) | –ò–∑–º–µ–Ω–µ–Ω–∏–µ |
|-------|-----------|------------|-----------|
| Unawatuna | 5.5 | 11.0 | +100% ‚úÖ |
| Galle | 11.0 | 16.5 | +50% ‚úÖ |
| Hikkaduwa | 8.8 | 13.2 | +50% ‚úÖ |
| Mirissa | 5.5 | 8.8 | +60% ‚úÖ |
| Weligama | 5.5 | 8.8 | +60% ‚úÖ |
| Negombo | 11.0 | 16.5 | +50% ‚úÖ |
| Kandy | 11.0 | 16.5 | +50% ‚úÖ |
| Trincomalee | 11.0 | 16.5 | +50% ‚úÖ |
| Tangalle | 8.8 | 13.2 | +50% ‚úÖ |

**–†–∞–¥–∏—É—Å 1 –≥—Ä–∞–¥—É—Å ‚âà 111 –∫–º**

---

## üéØ –ü–æ–∫—Ä—ã—Ç–∏–µ

### –Æ–∂–Ω–æ–µ –ø–æ–±–µ—Ä–µ–∂—å–µ (Galle - Tangalle)

–¢–µ–ø–µ—Ä—å **–ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–∫—Ä—ã—Ç–æ** —É–≤–µ–ª–∏—á–µ–Ω–Ω—ã–º–∏ —Ä–∞–¥–∏—É—Å–∞–º–∏:
- Galle: 16.5 –∫–º
- Unawatuna: 11 –∫–º
- Hikkaduwa: 13.2 –∫–º
- Mirissa: 8.8 –∫–º
- Weligama: 8.8 –∫–º
- Tangalle: 13.2 –∫–º

–û–±—ä–µ–∫—Ç—ã –≤–¥–æ–ª—å –≤—Å–µ–≥–æ –ø–æ–±–µ—Ä–µ–∂—å—è –±—É–¥—É—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã! ‚úÖ

---

## üöÄ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –î–ª—è production

1. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ç–æ—á–Ω–æ—Å—Ç–∏**
   - –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å —Å–ª—É—á–∞–∏, –∫–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è fallback (–±–ª–∏–∂–∞–π—à–∏–π –≥–æ—Ä–æ–¥ –≤–Ω–µ —Ä–∞–¥–∏—É—Å–∞)
   - –ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å, –Ω—É–∂–Ω–æ –ª–∏ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ –≥–æ—Ä–æ–¥–∞ –∏–ª–∏ —É–≤–µ–ª–∏—á–∏—Ç—å —Ä–∞–¥–∏—É—Å—ã

2. **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≥–æ—Ä–æ–¥–æ–≤**
   - –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ: Matara, Ella, Nuwara Eliya, Jaffna
   - –î–ª—è –±–æ–ª–µ–µ —Ç–æ—á–Ω–æ–≥–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –º–µ—Å—Ç

3. **–í–∞–ª–∏–¥–∞—Ü–∏—è**
   - –ü—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –æ–±—ä–µ–∫—Ç–∞ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π –≥–æ—Ä–æ–¥
   - –ü–æ–∑–≤–æ–ª–∏—Ç—å –≤—Ä—É—á–Ω—É—é –∏—Å–ø—Ä–∞–≤–∏—Ç—å, –µ—Å–ª–∏ —Å–∏—Å—Ç–µ–º–∞ –æ—à–∏–±–ª–∞—Å—å

### –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

1. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Google Geocoding API**
   - –¢–æ—á–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≥–æ—Ä–æ–¥–∞ —á–µ—Ä–µ–∑ API Google
   - –ù–æ —Ç—Ä–µ–±—É–µ—Ç API –∫–ª—é—á –∏ –∏–º–µ–µ—Ç –ª–∏–º–∏—Ç—ã

2. **–ü–æ–ª–∏–≥–æ–Ω—ã –≤–º–µ—Å—Ç–æ —Ä–∞–¥–∏—É—Å–æ–≤**
   - –ë–æ–ª–µ–µ —Ç–æ—á–Ω—ã–µ –≥—Ä–∞–Ω–∏—Ü—ã –≥–æ—Ä–æ–¥–æ–≤
   - –ù–æ —Å–ª–æ–∂–Ω–µ–µ –≤ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

3. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**
   - –°–æ—Ö—Ä–∞–Ω—è—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π –≥–æ—Ä–æ–¥ –¥–ª—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç
   - –ò–∑–±–µ–∂–∞—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π

---

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç

**–î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- ‚ùå Billy Breeze ‚Üí **Colombo** (108 –∫–º –æ—Ç –æ–±—ä–µ–∫—Ç–∞)
- ‚ùå –ú–Ω–æ–≥–∏–µ –æ–±—ä–µ–∫—Ç—ã –ø–æ–ø–∞–¥–∞–ª–∏ –≤ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –≥–æ—Ä–æ–¥–∞
- ‚ùå –†–∞–¥–∏—É—Å—ã —Å–ª–∏—à–∫–æ–º –º–∞–ª–µ–Ω—å–∫–∏–µ

**–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- ‚úÖ Billy Breeze ‚Üí **Unawatuna** (6.3 –∫–º –æ—Ç –æ–±—ä–µ–∫—Ç–∞)
- ‚úÖ –î–≤—É—Ö—ç—Ç–∞–ø–Ω–∞—è –ª–æ–≥–∏–∫–∞: —Ä–∞–¥–∏—É—Å ‚Üí –±–ª–∏–∂–∞–π—à–∏–π
- ‚úÖ –£–≤–µ–ª–∏—á–µ–Ω–Ω—ã–µ —Ä–∞–¥–∏—É—Å—ã –ø–æ–∫—Ä—ã–≤–∞—é—Ç –≤—Å—ë —é–∂–Ω–æ–µ –ø–æ–±–µ—Ä–µ–∂—å–µ
- ‚úÖ Colombo –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫–∞–∫ –ø–æ—Å–ª–µ–¥–Ω–∏–π fallback

**–°–∏—Å—Ç–µ–º–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –≥–æ—Ä–æ–¥–∞ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ!** üéâ

---

**–ê–≤—Ç–æ—Ä:** Rovo Dev  
**–î–∞—Ç–∞:** 26 —Ñ–µ–≤—Ä–∞–ª—è 2026  
**–°–≤—è–∑–∞–Ω–æ —Å:** SHORT_URL_FIX_REPORT.md
