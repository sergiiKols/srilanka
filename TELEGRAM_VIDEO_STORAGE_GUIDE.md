# üé¨ TELEGRAM VIDEO STORAGE - –ü–û–õ–ù–û–ï –†–£–ö–û–í–û–î–°–¢–í–û

## üéØ –ê–†–•–ò–¢–ï–ö–¢–£–†–ù–û–ï –†–ï–®–ï–ù–ò–ï

–ü–æ—Å–ª–µ –∞–Ω–∞–ª–∏–∑–∞ `terabox-upload-tool` –≤—ã—è–≤–ª–µ–Ω–æ:
- ‚ùå TeraBox —Ç—Ä–µ–±—É–µ—Ç —Ä—É—á–Ω—ã–µ credentials (ndus, jsToken)
- ‚ùå –ù–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Ä–æ—Ç–∞—Ü–∏–∏ —Ç–æ–∫–µ–Ω–æ–≤
- ‚ùå –†–∏—Å–∫ –±–∞–Ω–∞ –∑–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—é
- ‚ùå –ù–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è production —Å –º–Ω–æ–∂–µ—Å—Ç–≤–æ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**‚úÖ –í–´–ë–†–ê–ù–û: Telegram File Storage**

### –ü–æ—á–µ–º—É Telegram:
1. **–ë–µ—Å–ø–ª–∞—Ç–Ω–æ** - –Ω–∞–≤—Å–µ–≥–¥–∞, –±–µ–∑ –ª–∏–º–∏—Ç–æ–≤ –Ω–∞ –æ–±—â–∏–π –æ–±—ä—ë–º
2. **–ë–æ–ª—å—à–æ–π –æ–±—ä—ë–º** - –º–æ–∂–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å —Å–∫–æ–ª—å–∫–æ —É–≥–æ–¥–Ω–æ –≤–∏–¥–µ–æ
3. **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –Ω–∞–¥—ë–∂–Ω–æ** - —Å–µ—Ä–≤–µ—Ä—ã Telegram, 99.9% uptime
4. **–ë–µ–∑ credentials** - —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ Bot API –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
5. **–î–æ 2GB –Ω–∞ —Ñ–∞–π–ª** - –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –≤–∏–¥–µ–æ
6. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–∞–±–æ—Ç–∞** - –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è

---

## üìä –°–†–ê–í–ù–ï–ù–ò–ï –†–ï–®–ï–ù–ò–ô

| –ö—Ä–∏—Ç–µ—Ä–∏–π | TeraBox | Telegram Storage |
|----------|---------|------------------|
| **–°—Ç–æ–∏–º–æ—Å—Ç—å** | –ë–µ—Å–ø–ª–∞—Ç–Ω–æ 1TB, –Ω–æ... | –ë–µ—Å–ø–ª–∞—Ç–Ω–æ ‚àû |
| **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è** | ‚ùå –¢—Ä–µ–±—É–µ—Ç —Ä—É—á–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã | ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è |
| **–ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å** | ‚ö†Ô∏è –†–∏—Å–∫ –±–∞–Ω–∞ | ‚úÖ –û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π API |
| **–õ–∏–º–∏—Ç –Ω–∞ —Ñ–∞–π–ª** | –ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ | 2GB |
| **Production ready** | ‚ùå –ù–µ—Ç | ‚úÖ –î–∞ |
| **–†–æ—Ç–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–æ–≤** | ‚ùå –†—É—á–Ω–∞—è | ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è |
| **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** | ‚ö†Ô∏è –û–¥–∏–Ω –∞–∫–∫–∞—É–Ω—Ç | ‚úÖ –ù–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è |

---

## üèóÔ∏è –ê–†–•–ò–¢–ï–ö–¢–£–†–ê –†–ï–®–ï–ù–ò–Ø

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    USER FLOW                            ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

1. User –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤–∏–¥–µ–æ ‚Üí Telegram Bot
   ‚Üì
2. Bot –ø–æ–ª—É—á–∞–µ—Ç file_id (—É–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –≤–∏–¥–µ–æ)
   ‚Üì
3. –°–æ—Ö—Ä–∞–Ω—è–µ–º file_id –≤ Supabase DB (–ù–ï —Å–∫–∞—á–∏–≤–∞–µ–º –≤–∏–¥–µ–æ!)
   ‚Üì
4. User –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –æ–±—ä–µ–∫—Ç –Ω–∞ –∫–∞—Ä—Ç–µ
   ‚Üì
5. Frontend –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç: GET /api/video-url?fileId=ABC123
   ‚Üì
6. Backend: getFile(file_id) ‚Üí –≤—Ä–µ–º–µ–Ω–Ω—ã–π URL (~1 —á–∞—Å)
   ‚Üì
7. Video Player –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤–∏–¥–µ–æ
   ‚Üì
8. –ß–µ—Ä–µ–∑ 50 –º–∏–Ω—É—Ç ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ URL
```

### –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:

1. **–í–∏–¥–µ–æ –ù–ï —Å–∫–∞—á–∏–≤–∞–µ—Ç—Å—è** - –æ—Å—Ç–∞—ë—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–∞—Ö Telegram
2. **–°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–æ–ª—å–∫–æ file_id** - —ç—Ç–æ ~50 –±–∞–π—Ç –≤ –ë–î –≤–º–µ—Å—Ç–æ 500MB –≤–∏–¥–µ–æ
3. **–í—Ä–µ–º–µ–Ω–Ω—ã–µ URLs** - –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –ø–æ –∑–∞–ø—Ä–æ—Å—É, –¥–µ–π—Å—Ç–≤—É—é—Ç ~1 —á–∞—Å
4. **–ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ** - –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç URL –∫–∞–∂–¥—ã–µ 50 –º–∏–Ω—É—Ç
5. **–ù–µ—Ç —Ä–∞—Å—Ö–æ–¥–æ–≤** - —Ç—Ä–∞—Ñ–∏–∫ —á–µ—Ä–µ–∑ —Å–µ—Ä–≤–µ—Ä—ã Telegram

---

## üìÅ –°–û–ó–î–ê–ù–ù–´–ï –§–ê–ô–õ–´

### 1. `src/lib/telegram-video-uploader.ts`
**–§—É–Ω–∫—Ü–∏–∏:**
- `saveTelegramVideo()` - —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç file_id –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç
- `getTelegramVideoUrl()` - –ø–æ–ª—É—á–∞–µ—Ç –≤—Ä–µ–º–µ–Ω–Ω—ã–π URL –ø–æ file_id
- `getTelegramThumbnailUrl()` - –ø–æ–ª—É—á–∞–µ—Ç URL –ø—Ä–µ–≤—å—é
- `validateVideo()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ (–º–∞–∫—Å 2GB, 1 —á–∞—Å)

### 2. `src/pages/api/video-url.ts`
**API Endpoint:**
```
GET /api/video-url?fileId=ABC123
Response: { success: true, url: "https://...", expiresIn: "~1 hour" }
```

### 3. `src/components/VideoPlayer.tsx`
**React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç:**
- –ó–∞–≥—Ä—É–∂–∞–µ—Ç –≤–∏–¥–µ–æ —á–µ—Ä–µ–∑ API
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç loading state
- –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ URL –∫–∞–∂–¥—ã–µ 50 –º–∏–Ω—É—Ç
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- Poster —Å thumbnail

### 4. `database/12_add_video_support.sql`
**–ë–î –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
```sql
video_url TEXT                -- file_id –≤–∏–¥–µ–æ
video_thumbnail_url TEXT      -- file_id thumbnail
video_duration INTEGER        -- —Å–µ–∫—É–Ω–¥—ã
video_size INTEGER            -- –±–∞–π—Ç—ã
```

### 5. `src/pages/api/telegram-webhook.ts` (–æ–±–Ω–æ–≤–ª—ë–Ω)
**–û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–∏–¥–µ–æ:**
- –ü–æ–ª—É—á–µ–Ω–∏–µ message.video
- –í–∞–ª–∏–¥–∞—Ü–∏—è (2GB, 1 —á–∞—Å)
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ file_id –≤ –ë–î
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

---

## üöÄ –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–ï

### 1. –û—Ç–ø—Ä–∞–≤–∫–∞ –≤–∏–¥–µ–æ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤–∏–¥–µ–æ –±–æ—Ç—É:
```
User: [–æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç video.mp4]
Bot: üé¨ –í–∏–¥–µ–æ –ø–æ–ª—É—á–µ–Ω–æ!
     ‚è±Ô∏è –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: 3:45
     üì¶ –†–∞–∑–º–µ—Ä: 45.2MB
     
User: [–¥–æ–±–∞–≤–ª—è–µ—Ç –æ–ø–∏—Å–∞–Ω–∏–µ –∏ –ª–æ–∫–∞—Ü–∏—é]
User: [–Ω–∞–∂–∏–º–∞–µ—Ç "‚úÖ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å"]
Bot: ‚úÖ –í–∏–¥–µ–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ!
     üì¶ –†–∞–∑–º–µ—Ä: 45.2MB
     ‚è±Ô∏è –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: 3:45
     üí° –í–∏–¥–µ–æ —Ö—Ä–∞–Ω–∏—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–∞—Ö Telegram –±–µ—Å–ø–ª–∞—Ç–Ω–æ!
```

### 2. –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –Ω–∞ –∫–∞—Ä—Ç–µ

```tsx
import VideoPlayer from '@/components/VideoPlayer';

// –í –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ –∫–∞—Ä—Ç—ã
{property.video_url && (
  <VideoPlayer
    fileId={property.video_url}
    thumbnailFileId={property.video_thumbnail_url}
    width={640}
    height={360}
    autoPlay={false}
  />
)}
```

### 3. –ü—Ä—è–º–æ–π –∑–∞–ø—Ä–æ—Å URL (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

```javascript
const response = await fetch(`/api/video-url?fileId=${fileId}`);
const data = await response.json();

if (data.success) {
  const videoUrl = data.url; // –í—Ä–µ–º–µ–Ω–Ω—ã–π URL
  // –ò—Å–ø–æ–ª—å–∑—É–µ–º –≤ —Ç–µ—á–µ–Ω–∏–µ ~1 —á–∞—Å–∞
}
```

---

## üîß –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø

### –õ–∏–º–∏—Ç—ã (–º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å)

–í `src/lib/telegram-video-uploader.ts`:

```typescript
const TELEGRAM_STORAGE_CONFIG = {
  maxFileSize: 2 * 1024 * 1024 * 1024, // 2GB
  allowedMimeTypes: [
    'video/mp4',
    'video/mpeg',
    'video/quicktime',
    'video/x-msvideo',
    'video/webm',
    'video/x-matroska' // mkv
  ],
  urlExpiryTime: 24 * 60 * 60 * 1000 // 24 —á–∞—Å–∞ (Telegram ~1 —á–∞—Å)
};
```

### Environment Variables

–£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –µ—Å—Ç—å –≤ `.env`:
```env
TELEGRAM_BOT_TOKEN=your_bot_token
```

---

## ‚ö†Ô∏è –û–ì–†–ê–ù–ò–ß–ï–ù–ò–Ø –ò –†–ï–®–ï–ù–ò–Ø

### 1. –õ–∏–º–∏—Ç 2GB –Ω–∞ —Ñ–∞–π–ª

**–ü—Ä–æ–±–ª–µ–º–∞:** –í–∏–¥–µ–æ > 2GB –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤ Telegram

**–†–µ—à–µ–Ω–∏–µ:**
- –ö–æ–º–ø—Ä–µ—Å—Å–∏—è –≤–∏–¥–µ–æ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ (FFmpeg.wasm)
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: "–ú–∞–∫—Å 2GB"
- –î–ª—è –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤ ‚Üí –≥–∏–±—Ä–∏–¥–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ (—Å–º. –Ω–∏–∂–µ)

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
```typescript
// TODO: –î–æ–±–∞–≤–∏—Ç—å –≤ –±—É–¥—É—â–µ–º
if (video.file_size > 2GB) {
  await compressVideo(video, { maxSize: 2GB });
}
```

### 2. –í—Ä–µ–º–µ–Ω–Ω—ã–µ URLs (~1 —á–∞—Å)

**–ü—Ä–æ–±–ª–µ–º–∞:** URL —É—Å—Ç–∞—Ä–µ–≤–∞–µ—Ç —á–µ—Ä–µ–∑ —á–∞—Å

**–†–µ—à–µ–Ω–∏–µ:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ VideoPlayer
```typescript
useEffect(() => {
  const timer = setTimeout(() => {
    loadVideoUrl(); // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 50 –º–∏–Ω—É—Ç
  }, 50 * 60 * 1000);
  return () => clearTimeout(timer);
}, [videoUrl]);
```

### 3. –ù–µ–ª—å–∑—è –ø–æ–ª—É—á–∏—Ç—å –ø—Ä—è–º—É—é —Å—Å—ã–ª–∫—É

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ—Ç –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ URL –¥–ª—è —à–∞—Ä–∏–Ω–≥–∞

**–†–µ—à–µ–Ω–∏–µ:** –°–æ–∑–¥–∞—Ç—å –ø—É–±–ª–∏—á–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å VideoPlayer
```
https://yoursite.com/video/property-id
‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç VideoPlayer —Å –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º
```

---

## üìà –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–ï

### –î–ª—è –æ—á–µ–Ω—å –±–æ–ª—å—à–∏—Ö –æ–±—ä—ë–º–æ–≤:

#### –ì–∏–±—Ä–∏–¥–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ:
```typescript
async function saveVideo(video) {
  if (video.file_size < 50 * 1024 * 1024) {
    // < 50MB ‚Üí Supabase Storage (–±—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø)
    return await uploadToSupabase(video);
  } else {
    // > 50MB ‚Üí Telegram Storage (–±–µ—Å–ø–ª–∞—Ç–Ω–æ)
    return await saveTelegramVideo(video);
  }
}
```

#### –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ URLs:
```typescript
// Redis cache –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö URLs
const cachedUrl = await redis.get(`video:${fileId}`);
if (cachedUrl && !isExpired(cachedUrl)) {
  return cachedUrl;
}
const newUrl = await getTelegramVideoUrl(fileId);
await redis.setex(`video:${fileId}`, 3000, newUrl); // 50 –º–∏–Ω—É—Ç
```

---

## üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï

### 1. –ó–∞–ø—É—Å—Ç–∏—Ç—å SQL –º–∏–≥—Ä–∞—Ü–∏—é
```sql
-- –í Supabase SQL Editor
\i database/12_add_video_support.sql
```

### 2. –ó–∞–ø—É—Å—Ç–∏—Ç—å dev —Å–µ—Ä–≤–µ—Ä
```bash
npm run dev
```

### 3. –û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤–∏–¥–µ–æ –±–æ—Ç—É
1. –û—Ç–∫—Ä–æ–π—Ç–µ –±–æ—Ç–∞ –≤ Telegram
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –≤–∏–¥–µ–æ (< 2GB, MP4 —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
3. –î–æ–±–∞–≤—å—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∏ –≥–µ–æ–ª–æ–∫–∞—Ü–∏—é
4. –ù–∞–∂–º–∏—Ç–µ "‚úÖ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å"

### 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ë–î
```sql
SELECT 
  id, 
  title,
  video_url,        -- –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å file_id
  video_duration,
  video_size
FROM saved_properties
WHERE video_url IS NOT NULL;
```

### 5. –û—Ç–∫—Ä—ã—Ç—å –æ–±—ä–µ–∫—Ç –Ω–∞ –∫–∞—Ä—Ç–µ
```tsx
// –î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∫–∞—Ä—Ç—ã
<VideoPlayer fileId={property.video_url} />
```

---

## üìä –ú–û–ù–ò–¢–û–†–ò–ù–ì

### –õ–æ–≥–∏ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏:
```
üé¨ Saving video to Telegram Storage...
üìä Video info: 225s, 1920x1080
üì• Fetching video file info...
üì¶ File size: 45MB
üì∏ Saving thumbnail file_id...
‚úÖ Video saved to Telegram Storage!
üÜî file_id: BAACAgIAAxkBAAIC...
üì¶ Size: 45MB
‚è±Ô∏è Duration: 3:45
```

### –õ–æ–≥–∏ –ø—Ä–∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–∏:
```
üîó Getting video URL from Telegram...
‚úÖ Got temporary video URL
‚è±Ô∏è URL valid for ~1 hour
```

---

## üí° –°–û–í–ï–¢–´

### DO ‚úÖ
- –°–æ—Ö—Ä–∞–Ω—è—Ç—å —Ç–æ–ª—å–∫–æ file_id –≤ –ë–î
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å VideoPlayer –∫–æ–º–ø–æ–Ω–µ–Ω—Ç (–∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ)
- –í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–∑–º–µ—Ä (< 2GB)
- –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å –∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å thumbnail –¥–ª—è preview

### DON'T ‚ùå
- –ù–µ —Å–∫–∞—á–∏–≤–∞—Ç—å –≤–∏–¥–µ–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä (–Ω–µ –Ω—É–∂–Ω–æ!)
- –ù–µ —Ö—Ä–∞–Ω–∏—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–µ URLs –≤ –ë–î (—É—Å—Ç–∞—Ä–µ–≤–∞—é—Ç)
- –ù–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å file_id –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é (–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π ID)
- –ù–µ –ø–æ–ª–∞–≥–∞—Ç—å—Å—è –Ω–∞ URL –¥–æ–ª—å—à–µ 1 —á–∞—Å–∞

---

## üéì –ü–†–ò–ú–ï–†–´ –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Ø

### –ü—Ä–∏–º–µ—Ä 1: –ü—Ä–æ—Å—Ç–æ–π –ø–ª–µ–µ—Ä
```tsx
<VideoPlayer 
  fileId="BAACAgIAAxkBAAIC..." 
/>
```

### –ü—Ä–∏–º–µ—Ä 2: –° –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
```tsx
<VideoPlayer 
  fileId="BAACAgIAAxkBAAIC..."
  thumbnailFileId="AAMCBAADGQEAAgFj..."
  width={800}
  height={450}
  autoPlay={true}
  className="my-video-player"
/>
```

### –ü—Ä–∏–º–µ—Ä 3: –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –≤–∏–¥–µ–æ
```tsx
{property.videos?.map((video, idx) => (
  <VideoPlayer 
    key={idx}
    fileId={video.file_id}
    thumbnailFileId={video.thumbnail_id}
  />
))}
```

---

## ‚úÖ –ß–ï–ö–õ–ò–°–¢ –í–ù–ï–î–†–ï–ù–ò–Ø

- [x] –°–æ–∑–¥–∞–Ω telegram-video-uploader.ts
- [x] –°–æ–∑–¥–∞–Ω API endpoint /api/video-url
- [x] –°–æ–∑–¥–∞–Ω VideoPlayer –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
- [x] –û–±–Ω–æ–≤–ª—ë–Ω webhook –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è file_id
- [x] –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è –≤ –ë–î (video_url, video_thumbnail_url)
- [x] –û–±–Ω–æ–≤–ª–µ–Ω—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã TypeScript
- [ ] –ó–∞–ø—É—â–µ–Ω–∞ SQL –º–∏–≥—Ä–∞—Ü–∏—è
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞ –æ—Ç–ø—Ä–∞–≤–∫–∞ –≤–∏–¥–µ–æ
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ
- [ ] –î–æ–±–∞–≤–ª–µ–Ω VideoPlayer –Ω–∞ –∫–∞—Ä—Ç—É
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ —Ä–∞–±–æ—Ç–∞ –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è URL

---

## üÜò TROUBLESHOOTING

### –í–∏–¥–µ–æ –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è

**–ü—Ä–æ–±–ª–µ–º–∞:** "Failed to load video"

**–†–µ—à–µ–Ω–∏—è:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å TELEGRAM_BOT_TOKEN –≤ .env
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ file_id —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ –ë–î
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏: `/api/video-url?fileId=...`
4. –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –≤–∏–¥–µ–æ –∑–∞–Ω–æ–≤–æ

### URL —É—Å—Ç–∞—Ä–µ–≤–∞–µ—Ç

**–ü—Ä–æ–±–ª–µ–º–∞:** –í–∏–¥–µ–æ –ø–µ—Ä–µ—Å—Ç–∞—ë—Ç –∏–≥—Ä–∞—Ç—å —á–µ—Ä–µ–∑ —á–∞—Å

**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ VideoPlayer –∫–æ–º–ø–æ–Ω–µ–Ω—Ç - –æ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç URL

### –ë–æ–ª—å—à–∏–µ –≤–∏–¥–µ–æ

**–ü—Ä–æ–±–ª–µ–º–∞:** –í–∏–¥–µ–æ > 2GB –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:** 
```typescript
// –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ
if (video.file_size > 2 * 1024 * 1024 * 1024) {
  bot.sendMessage(chatId, 
    '‚ö†Ô∏è –í–∏–¥–µ–æ —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–µ (>2GB). –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º —Å–∂–∞—Ç—å –≤–∏–¥–µ–æ.'
  );
}
```

---

## üìö –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–ê–Ø –ò–ù–§–û–†–ú–ê–¶–ò–Ø

### Telegram Bot API Documentation
- [getFile](https://core.telegram.org/bots/api#getfile)
- [File limits](https://core.telegram.org/bots/api#sending-files)
- [Video messages](https://core.telegram.org/bots/api#video)

### –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã (–µ—Å–ª–∏ –ø–æ–Ω–∞–¥–æ–±—è—Ç—Å—è –≤ –±—É–¥—É—â–µ–º):
1. **Supabase Storage** - $0.021/GB –ø–æ—Å–ª–µ 1GB
2. **Cloudflare R2** - $0.015/GB –ø–æ—Å–ª–µ 10GB
3. **AWS S3** - $0.023/GB
4. **–ì–∏–±—Ä–∏–¥–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ** - –∫–æ–º–±–∏–Ω–∞—Ü–∏—è –≤—ã—à–µ

---

## üéØ –ò–¢–û–ì–ò

**‚úÖ TELEGRAM STORAGE - –ò–î–ï–ê–õ–¨–ù–û–ï –†–ï–®–ï–ù–ò–ï:**

1. **–ë–µ—Å–ø–ª–∞—Ç–Ω–æ** - 0‚ÇΩ –Ω–∞–≤—Å–µ–≥–¥–∞
2. **–ù–∞–¥—ë–∂–Ω–æ** - —Å–µ—Ä–≤–µ—Ä—ã Telegram
3. **–ü—Ä–æ—Å—Ç–æ** - —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ Bot API
4. **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ** - –±–µ–∑ –ª–∏–º–∏—Ç–æ–≤ –Ω–∞ –æ–±—ä—ë–º
5. **Production-ready** - –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å

**–ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!** üöÄ

---

**–í–æ–ø—Ä–æ—Å—ã?** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –∏–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ issue.
